(function(b){var i=1;b.generateId=function(b){var h;do h=i++ +(b?"-"+b:"");while(document.getElementById(h));return h}})(jQuery);
(function(b){b.getScrollbarWidth=function(){var b=document.createElement("p");b.style.width="100%";b.style.height="200px";var e=document.createElement("div");e.style.position="absolute";e.style.top="0px";e.style.left="0px";e.style.visibility="hidden";e.style.width="200px";e.style.height="150px";e.style.overflow="hidden";e.appendChild(b);document.body.appendChild(e);var h=b.offsetWidth;e.style.overflow="scroll";b=b.offsetWidth;h==b&&(b=e.clientWidth);document.body.removeChild(e);return h-b}})(jQuery);
(function(b){b.executeCallback=function(b,e){return"function"==typeof b?(b.call(this,e),!0):!1}})(jQuery);(function(b){b.getHashParam=function(b){var e=window.location.hash;if(""!=e){var h=0<e.indexOf("&"+b+"=")?e.indexOf("&"+b+"="):e.indexOf("#"+b+"=");if(0<=h)return h+=b.length+2,b=e.indexOf("&",h),b>h?e.substring(h,b):0>b?e.substring(h):""}return!1}})(jQuery);
(function(b){b.updateHashParam=function(i,e){var h=b.getHashParam(i),a=window.location.hash;if(h!==e)if("string"==typeof h){var k=0<a.indexOf("&"+i+"=")?a.indexOf("&"+i+"="):a.indexOf("#"+i+"="),h=k+i.length+2+h.length;window.location.replace(a.substring(0,k)+(0==k?"#":"&")+i+"="+e+a.substring(h))}else 0===a.length?window.location.replace("#"+i+"="+e):window.location.replace(a+"&"+i+"="+e)}})(jQuery);
jQuery.fn.oneFingerScroll=function(){var b,i;$(this).bind("touchstart",function(e){e=e.originalEvent;b=$(this).scrollTop()+e.touches[0].pageY;i=$(this).scrollLeft()+e.touches[0].pageX;e.preventDefault()});$(this).bind("touchmove",function(e){e=e.originalEvent;$(this).scrollTop(b-e.touches[0].pageY);$(this).scrollLeft(i-e.touches[0].pageX);e.preventDefault()});return this};
(function(b){b.fn.dragscrollable=function(i){var e,h,a,k=b.extend({dragSelector:">:first",acceptPropagatedEvent:!0,preventDefault:!0},i||{});a=function(a){if(1!=a.which||!a.data.acceptPropagatedEvent&&a.target!=this)return!1;a.data.lastCoord={left:a.clientX,top:a.clientY};b.event.add(document,"mouseup",e,a.data);b.event.add(document,"mousemove",h,a.data);if(a.data.preventDefault)return a.preventDefault(),!1};h=function(a){var b=a.clientX-a.data.lastCoord.left,e=a.clientY-a.data.lastCoord.top;a.data.scrollable.scrollLeft(a.data.scrollable.scrollLeft()-
b);a.data.scrollable.scrollTop(a.data.scrollable.scrollTop()-e);a.data.lastCoord={left:a.clientX,top:a.clientY};if(a.data.preventDefault)return a.preventDefault(),!1};e=function(a){b.event.remove(document,"mousemove",h);b.event.remove(document,"mouseup",e);if(a.data.preventDefault)return a.preventDefault(),!1};this.each(function(){var e={scrollable:b(this),acceptPropagatedEvent:k.acceptPropagatedEvent,preventDefault:k.preventDefault};b(this).find(k.dragSelector).bind("mousedown",e,a)})}})(jQuery);
(function(b){var i,e,h;b.extend({pnotify_remove_all:function(){var a=e.data("pnotify");a&&a.length&&b.each(a,function(){this.pnotify_remove&&this.pnotify_remove()})},pnotify:function(a){e||(e=b("body"));h||(h=b(window));var g,c;"object"!=typeof a?(c=b.extend({},b.pnotify.defaults),c.pnotify_text=a):c=b.extend({},b.pnotify.defaults,a);if(c.pnotify_before_init&&!1===c.pnotify_before_init(c))return null;var k,l=function(a,c){f.css("display","none");var e=document.elementFromPoint(a.clientX,a.clientY);
f.css("display","block");var g=b(e),h=g.css("cursor");f.css("cursor","auto"!=h?h:"default");if(!k||k.get(0)!=e)k&&(m.call(k.get(0),"mouseleave",a.originalEvent),m.call(k.get(0),"mouseout",a.originalEvent)),m.call(e,"mouseenter",a.originalEvent),m.call(e,"mouseover",a.originalEvent);m.call(e,c,a.originalEvent);k=g},f=b("<div />",{"class":"ui-pnotify "+c.pnotify_addclass,css:{display:"none"},mouseenter:function(a){c.pnotify_nonblock&&a.stopPropagation();c.pnotify_mouse_reset&&"out"==g&&(f.stop(!0),
g="in",f.css("height","auto").animate({width:c.pnotify_width,opacity:c.pnotify_nonblock?c.pnotify_nonblock_opacity:c.pnotify_opacity},"fast"));c.pnotify_nonblock&&f.animate({opacity:c.pnotify_nonblock_opacity},"fast");c.pnotify_hide&&c.pnotify_mouse_reset&&f.pnotify_cancel_remove();c.pnotify_closer&&!c.pnotify_nonblock&&f.closer.show()},mouseleave:function(a){c.pnotify_nonblock&&a.stopPropagation();k=null;f.css("cursor","auto");c.pnotify_nonblock&&"out"!=g&&f.animate({opacity:c.pnotify_opacity},"fast");
c.pnotify_hide&&c.pnotify_mouse_reset&&f.pnotify_queue_remove();f.closer.hide();b.pnotify_position_all()},mouseover:function(a){c.pnotify_nonblock&&a.stopPropagation()},mouseout:function(a){c.pnotify_nonblock&&a.stopPropagation()},mousemove:function(a){c.pnotify_nonblock&&(a.stopPropagation(),l(a,"onmousemove"))},mousedown:function(a){c.pnotify_nonblock&&(a.stopPropagation(),a.preventDefault(),l(a,"onmousedown"))},mouseup:function(a){c.pnotify_nonblock&&(a.stopPropagation(),a.preventDefault(),l(a,
"onmouseup"))},click:function(a){c.pnotify_nonblock&&(a.stopPropagation(),l(a,"onclick"))},dblclick:function(a){c.pnotify_nonblock&&(a.stopPropagation(),l(a,"ondblclick"))}});f.opts=c;c.pnotify_shadow&&!b.browser.msie&&(f.shadow_container=b("<div />",{"class":"ui-widget-shadow ui-corner-all ui-pnotify-shadow"}).prependTo(f));f.container=b("<div />",{"class":"ui-widget ui-widget-content ui-corner-all ui-pnotify-container "+("error"==c.pnotify_type?"ui-state-error":"ui-state-highlight")}).appendTo(f);
f.pnotify_version="1.0.1";f.pnotify=function(a){var e=c;"string"==typeof a?c.pnotify_text=a:c=b.extend({},c,a);f.opts=c;c.pnotify_shadow!=e.pnotify_shadow&&(c.pnotify_shadow&&!b.browser.msie?f.shadow_container=b("<div />",{"class":"ui-widget-shadow ui-pnotify-shadow"}).prependTo(f):f.children(".ui-pnotify-shadow").remove());!1===c.pnotify_addclass?f.removeClass(e.pnotify_addclass):c.pnotify_addclass!==e.pnotify_addclass&&f.removeClass(e.pnotify_addclass).addClass(c.pnotify_addclass);!1===c.pnotify_title?
f.title_container.hide("fast"):c.pnotify_title!==e.pnotify_title&&f.title_container.html(c.pnotify_title).show(200);!1===c.pnotify_text?f.text_container.hide("fast"):c.pnotify_text!==e.pnotify_text&&(c.pnotify_insert_brs&&(c.pnotify_text=c.pnotify_text.replace(/\n/g,"<br />")),f.text_container.html(c.pnotify_text).show(200));c.pnotify_width!==e.pnotify_width&&f.animate({width:c.pnotify_width});c.pnotify_min_height!==e.pnotify_min_height&&f.container.animate({minHeight:c.pnotify_min_height});c.pnotify_opacity!==
e.pnotify_opacity&&f.fadeTo(c.pnotify_animate_speed,c.pnotify_opacity);c.pnotify_hide?e.pnotify_hide||f.pnotify_queue_remove():f.pnotify_cancel_remove();f.pnotify_queue_position();return f};f.pnotify_queue_position=function(){i&&clearTimeout(i);i=setTimeout(function(){b.pnotify_position_all},10)};f.pnotify_display=function(){f.parent().length||f.appendTo(e);c.pnotify_before_open&&!1===c.pnotify_before_open(f)||(f.pnotify_queue_position(),"fade"==c.pnotify_animation||"fade"==c.pnotify_animation.effect_in?
f.show().fadeTo(0,0).hide():1!=c.pnotify_opacity&&f.show().fadeTo(0,c.pnotify_opacity).hide(),f.animate_in(function(){c.pnotify_after_open&&c.pnotify_after_open(f);f.pnotify_queue_position();c.pnotify_hide&&f.pnotify_queue_remove()}))};f.pnotify_remove=function(){f.timer&&(window.clearTimeout(f.timer),f.timer=null);c.pnotify_before_close&&!1===c.pnotify_before_close(f)||f.animate_out(function(){c.pnotify_after_close&&!1===c.pnotify_after_close(f)||(f.pnotify_queue_position(),c.pnotify_remove&&f.detach())})};
f.animate_in=function(a){g="in";var b;b="undefined"!=typeof c.pnotify_animation.effect_in?c.pnotify_animation.effect_in:c.pnotify_animation;"none"==b?(f.show(),a()):"show"==b?f.show(c.pnotify_animate_speed,a):"fade"==b?f.show().fadeTo(c.pnotify_animate_speed,c.pnotify_opacity,a):"slide"==b?f.slideDown(c.pnotify_animate_speed,a):"function"==typeof b?b("in",a,f):f.effect&&f.effect(b,{},c.pnotify_animate_speed,a)};f.animate_out=function(a){g="out";var b;b="undefined"!=typeof c.pnotify_animation.effect_out?
c.pnotify_animation.effect_out:c.pnotify_animation;"none"==b?(f.hide(),a()):"show"==b?f.hide(c.pnotify_animate_speed,a):"fade"==b?f.fadeOut(c.pnotify_animate_speed,a):"slide"==b?f.slideUp(c.pnotify_animate_speed,a):"function"==typeof b?b("out",a,f):f.effect&&f.effect(b,{},c.pnotify_animate_speed,a)};f.pnotify_cancel_remove=function(){f.timer&&window.clearTimeout(f.timer)};f.pnotify_queue_remove=function(){f.pnotify_cancel_remove();f.timer=window.setTimeout(function(){f.pnotify_remove()},isNaN(c.pnotify_delay)?
0:c.pnotify_delay)};f.closer=b("<div />",{"class":"ui-pnotify-closer",css:{cursor:"pointer",display:"none"},click:function(){f.pnotify_remove();f.closer.hide()}}).append(b("<span />",{"class":"ui-icon ui-icon-circle-close"})).appendTo(f.container);f.title_container=b("<div />",{"class":"ui-pnotify-title",html:c.pnotify_title}).appendTo(f.container);!1===c.pnotify_title&&f.title_container.hide();c.pnotify_insert_brs&&"string"==typeof c.pnotify_text&&(c.pnotify_text=c.pnotify_text.replace(/\n/g,"<br />"));
f.text_container=b("<div />",{"class":"ui-pnotify-text",html:c.pnotify_text}).appendTo(f.container);!1===c.pnotify_text&&f.text_container.hide();"string"==typeof c.pnotify_width&&f.css("width",c.pnotify_width);"string"==typeof c.pnotify_min_height&&f.container.css("min-height",c.pnotify_min_height);a=e.data("pnotify");if(null==a||"object"!=typeof a)a=[];a="top"==c.pnotify_stack.push?b.merge([f],a):b.merge(a,[f]);e.data("pnotify",a);c.pnotify_after_init&&c.pnotify_after_init(f);c.pnotify_stack.animation=
!1;f.pnotify_display();return f}});var a=/^on/,k=/^(dbl)?click$|^mouse(move|down|up|over|out|enter|leave)$|^contextmenu$/,W=/^(focus|blur|select|change|reset)$|^key(press|down|up)$/,v=/^(scroll|resize|(un)?load|abort|error)$/,m=function(e,g){var c,e=e.toLowerCase();document.createEvent&&this.dispatchEvent?(e=e.replace(a,""),e.match(k)?(b(this).offset(),c=document.createEvent("MouseEvents"),c.initMouseEvent(e,g.bubbles,g.cancelable,g.view,g.detail,g.screenX,g.screenY,g.clientX,g.clientY,g.ctrlKey,
g.altKey,g.shiftKey,g.metaKey,g.button,g.relatedTarget)):e.match(W)?(c=document.createEvent("UIEvents"),c.initUIEvent(e,g.bubbles,g.cancelable,g.view,g.detail)):e.match(v)&&(c=document.createEvent("HTMLEvents"),c.initEvent(e,g.bubbles,g.cancelable)),c&&this.dispatchEvent(c)):(e.match(a)||(e="on"+e),c=document.createEventObject(g),this.fireEvent(e,c))};b.pnotify.defaults={pnotify_nonblock:!1,pnotify_type:"notice",pnotify_opacity:1,pnotify_shadow:!1,pnotify_closer:!0,pnotify_delay:8E3,pnotify_mouse_reset:!0,
pnotify_remove:!0,pnotify_insert_brs:!0,pnotify_stack:{dir1:"down",dir2:"left",push:"bottom"}}})(jQuery);
(function(b){var i=function(e,h){var a=b.extend({},{adaptivePadding:0.05,backendServer:"",enableAutoTitle:!0,enableFilename:!0,enableFullscreen:!0,enableGotoPage:!0,enableGrid:!0,enableGridSlider:!0,enableKeyScroll:!0,enableSpaceScroll:!1,enableZoomSlider:!0,fixedPadding:10,fixedHeightGrid:!0,viewerFloat:"none",iipServerBaseUrl:"",maxPagesPerRow:8,maxZoomLevel:0,minPagesPerRow:2,minZoomLevel:0,onFullscreen:null,onFullscreenEnter:null,onFullscreenExit:null,onGrid:null,onJump:null,onReady:null,onScroll:null,
onScrollDown:null,onScrollUp:null,onZoom:null,onZoomIn:null,onZoomOut:null,pagesPerRow:5,tileFadeSpeed:300,tileHeight:256,tileWidth:256,viewportMargin:200,zoomLevel:2},h);b.extend(a,{centerX:0,centerY:0,ctrlKey:!1,currentPageIndex:0,desiredXOffset:0,desiredYOfffset:0,dimAfterZoom:0,dimBeforeZoom:0,doubleClick:!1,elementSelector:"",firstAjaxRequest:!0,firstPageLoaded:-1,firstRowLoaded:-1,fullscreenStatusbar:null,goDirectlyTo:-1,hashParamSuffix:"",heightAbovePages:[],horizontalOffset:0,horizontalPadding:0,
ID:null,inFullscreen:!1,inGrid:!1,itemTitle:"",lastPageLoaded:-1,lastRowLoaded:-1,maxHeight:0,maxWidth:0,mobileSafari:!1,numClicks:0,numPages:0,numRows:0,pages:[],panelHeight:0,panelWidth:0,prevVptTop:0,scaleWait:!1,selector:"",scrollbarWidth:0,scrollLeft:-1,scrollSoFar:0,scrollTop:-1,totalHeight:0,verticalOffset:0,verticalPadding:0,viewerXOffset:0,viewerYOffset:0,zoomInCallback:null,zoomOutCallback:null});var k=function(b,j){var c=a.scrollSoFar-a.viewportMargin,f=c+a.panelHeight+2*a.viewportMargin;
return b>=c&&b<=f||j>=c&&j<=f||b<=c&&j>=f},i=function(d){return 0<b(a.selector+"page-"+d).length},v=function(b){var j=a.heightAbovePages[b];return k(j,j+a.pages[b].h+a.verticalPadding)},m=function(d){setTimeout(function(){if(v(d)){var j=[],c=a.pages[d].fn,f=a.pages[d].r,e=a.pages[d].c,g=a.pages[d].w,q=a.pages[d].h,h=a.pages[d].m_z,m,l,n,r,s,p,o=0;m=a.heightAbovePages[d]+a.verticalPadding;i(d)||j.push('<div id="'+a.ID+"page-"+d+'" style="top: '+m+"px; width: "+g+"px; height: "+q+"px; left: 50%; margin-left: -"+
g/2+'px" class="diva-page">');q-=(f-1)*a.tileHeight;m=g-(e-1)*a.tileWidth;g=[];for(l=0;l<f;l++)for(n=0;n<e;n++){var t=l*a.tileHeight,u=n*a.tileWidth,w=a.tileFadeSpeed?"none":"inline";p=h===a.maxZoomLevel?a.zoomLevel:a.zoomLevel+(h-a.maxZoomLevel);r=l===f-1?q:a.tileHeight;s=n===e-1?m:a.tileWidth;p=a.iipServerBaseUrl+c+"&amp;JTL="+p+","+o;var x;if(x=!(0<b(a.selector+"tile-"+d+"-"+o).length))x=a.heightAbovePages[d]+l*a.tileHeight+a.verticalPadding,x=k(x,x+a.tileHeight);x&&j.push('<div id="'+a.ID+"tile-"+
d+"-"+o+'"style="display: '+w+"; position: absolute; top: "+t+"px; left: "+u+"px; background-image: url('"+p+"'); height: "+r+"px; width: "+s+'px;"></div>');g.push(o);o++}i(d)?b(a.selector+"page-"+d).append(j.join("")):(j.push("</div>"),j=j.join(""),b(a.innerSelector).append(j));if(a.tileFadeSpeed)for(j=0;j<g.length;j++)b(a.selector+"tile-"+d+"-"+g[j]).fadeIn(a.tileFadeSpeed)}},80)},G=function(d){i(d)&&b(a.selector+"page-"+d).empty().remove()},g=function(b){return 0<=b&&b<a.numRows},c=function(b){return 0<=
b&&b<a.numPages},p=function(d){d+=1;b(a.selector+"current span").text(d);a.inFullscreen&&(null===a.fullscreenStatusbar&&I("fade"),b(a.selector+"page-number-fullscreen").text(d))},l=function(b){var j=a.currentPageIndex,c=a.currentPageIndex+parseInt(b,10),f=!1;0>b?0<=c&&a.heightAbovePages[c]+a.pages[c].h+a.verticalPadding>=a.scrollSoFar&&(f=!0):0<b&&a.heightAbovePages[j]+a.pages[j].h+a.verticalPadding<a.scrollSoFar&&(f=!0);return f?(a.currentPageIndex=c,0!==b&&(l(b)||p(c)),!0):!1},f=function(b){var c=
Math.floor(a.currentPageIndex/a.pagesPerRow),e=c+parseInt(b,10),h=a.scrollSoFar+a.panelHeight/2,i=!1;if(0>b){if(0<=e&&(a.rowHeight*c>=h||a.rowHeight*e>=a.scrollSoFar))i=!0}else 0<b&&a.rowHeight*(c+1)<a.scrollSoFar&&g(e)&&(i=!0);return i?(a.currentPageIndex=e*a.pagesPerRow,0!==b&&(f(b)||p(a.currentPageIndex)),!0):!1},n=function(b,j){0<j?c(b)&&(v(b)?(m(b),a.lastPageLoaded=b,n(a.lastPageLoaded+1,j)):a.heightAbovePages[b]+a.pages[b].h+a.verticalPadding<a.scrollSoFar&&n(b+1,j)):c(b)&&(v(b)?(m(b),a.firstPageLoaded=
b,n(a.firstPageLoaded-1,j)):a.heightAbovePages[b]>a.scrollSoFar+a.panelHeight&&n(b-1,j))},w=function(b,j){0<j?c(b)&&a.heightAbovePages[b]+a.pages[b].h+a.verticalPadding<a.scrollSoFar&&(G(b),a.firstPageLoaded++,w(a.firstPageLoaded,j)):c(b)&&a.heightAbovePages[b]>a.scrollSoFar+a.panelHeight&&(G(b),a.lastPageLoaded--,w(a.lastPageLoaded,j))},r=function(b,c){0<c?g(b)&&(A(b)?(B(b),a.lastRowLoaded=b,r(a.lastRowLoaded+1,c)):a.rowHeight*(b+1)<a.scrollSoFar&&r(b+1,c)):g(b)&&(A(b)?(B(b),a.firstRowLoaded=b,r(a.firstRowLoaded-
1,c)):a.rowHeight*b>a.scrollSoFar+a.panelHeight&&r(b-1,c))},H=function(d){0<b(a.selector+"row-"+d).length&&b(a.selector+"row-"+d).empty().remove()},y=function(b,c){0<c?g(b)&&a.rowHeight*(b+1)<a.scrollSoFar&&(H(b),a.firstRowLoaded++,y(a.firstRowLoaded,c)):g(b)&&a.rowHeight*b>a.scrollSoFar+a.panelHeight&&(H(b),a.lastRowLoaded--,y(a.lastRowLoaded,c))},J=function(d){0>d?(n(a.firstPageLoaded,d),l(-1),w(a.lastPageLoaded,d)):0<d&&(w(a.firstPageLoaded,d),n(a.lastPageLoaded,d),l(1));0!==d&&(b.executeCallback(a.onScroll,
a.scrollSoFar),0<d?b.executeCallback(a.onScrollDown,a.scrollSoFar):b.executeCallback(a.onScrollUp,a.scrollSoFar))},K=function(){a.gridScrollTop?(b(a.outerSelector).scrollTop(a.gridScrollTop),a.gridScrollTop=0):s(a.currentPageIndex+1)},L=function(){var d;0<=a.goDirectlyTo?(s(a.goDirectlyTo+1,a.desiredYOffset,a.desiredXOffset),p(a.goDirectlyTo),a.goDirectlyTo=-1,d=!0):d=!1;if(!d)if(0<=a.scrollLeft&&0<=a.scrollTop)b(a.outerSelector).scrollTop(a.scrollTop),b(a.outerSelector).scrollLeft(a.scrollLeft),
a.scrollLeft=-1,a.scrollTop=-1;else{var c;c=0<a.dimBeforeZoom?a.dimAfterZoom/a.dimBeforeZoom:1;a.doubleClick?(d=a.centerX*c,c*=a.centerY,d=Math.max(d-a.panelWidth/2,0),c=Math.max(c-a.panelHeight/2,0)):(d=a.maxWidth/2-a.panelWidth/2+a.horizontalPadding,c*=a.verticalOffset);a.prevVptTop=0;b(a.outerSelector).scrollTop(c);b(a.outerSelector).scrollLeft(d)}},N=function(d,f){b.ajax({url:a.backendServer+"&z="+d,cache:!0,dataType:"json",success:function(d){a.pages=d.pgs;a.maxWidth=d.dims.max_w;a.maxHeight=
d.dims.max_h;if(a.firstAjaxRequest){a.itemTitle=d.item_title;a.numPages=d.pgs.length;a.maxZoomLevel=0<a.maxZoomLevel&&a.maxZoomLevel<=d.max_zoom?a.maxZoomLevel:d.max_zoom;b(a.selector+"current label").text(a.numPages);b(a.selector+"goto-page-fullscreen input").attr("placeholder",a.numPages);a.enableAutoTitle&&b(a.elementSelector).prepend('<div id="'+a.ID+'title">'+a.itemTitle+"</div>");var e=parseInt(b.getHashParam("p"+a.hashParamSuffix),10);!a.enableFilename&&c(e)&&(a.goDirectlyTo=e);e=b.getHashParam("i"+
a.hashParamSuffix);e=M(e);a.enableFilename&&0<=e&&(a.goDirectlyTo=e)}b(a.outerSelector).scrollTop(0);a.scrollSoFar=0;b(a.innerSelector).text("");a.firstPageLoaded=0;a.firstRowLoaded=-1;b.executeCallback(f,d);a.firstAjaxRequest=!1}})},A=function(b){b*=a.rowHeight;return k(b,b+a.rowHeight+a.fixedPadding)},B=function(d){if(!(0<b(a.selector+"row-"+d).length)){var f,e=[];e.push('<div class="diva-row" id="'+a.ID+"row-"+d+'" style="height: '+a.rowHeight+"; top: "+(a.rowHeight*d+a.fixedPadding)+'px;">');
for(f=0;f<a.pagesPerRow;f++){var g=d*a.pagesPerRow+f;if(!c(g))break;var h=a.pages[g].fn,i=a.fixedHeightGrid?(a.rowHeight-a.fixedPadding)*a.pages[g].w/a.pages[g].h:a.gridPageWidth,q=a.fixedHeightGrid?a.rowHeight-a.fixedPadding:i/a.pages[g].w*a.pages[g].h,k=parseInt(f*(a.fixedPadding+a.gridPageWidth)+a.fixedPadding,10),i=parseInt(i,10),q=parseInt(q,10),k=k+(a.fixedHeightGrid?(a.gridPageWidth-i)/2:0);e.push('<div id="'+a.ID+"page-"+g+'" class="diva-page" style="width: '+i+"px; height: "+q+"px; left: "+
k+'px;"><div style="background-image: url(\''+(a.iipServerBaseUrl+h+"&amp;HEI="+(q+2)+"&amp;CVT=JPG")+"'); width: "+i+"px; height: "+q+'px;"></div></div>')}b(a.innerSelector).append(e.join(""))}},z=function(){N(0,function(d){a.enableGridSlider&&O();var c=(a.panelWidth-a.fixedPadding*(a.pagesPerRow+1))/a.pagesPerRow;a.gridPageWidth=c;a.rowHeight=a.fixedHeightGrid?a.fixedPadding+d.dims.min_ratio*c:a.fixedPadding+d.dims.max_ratio*c;a.numRows=Math.ceil(a.numPages/a.pagesPerRow);a.totalHeight=a.numRows*
a.rowHeight+a.fixedPadding;b(a.innerSelector).css("height",Math.round(a.totalHeight));b(a.innerSelector).css("width",Math.round(a.panelWidth));K();a.scrollSoFar=b(a.outerSelector).scrollTop();for(d=0;d<a.numPages;d+=a.pagesPerRow)c=Math.floor(d/a.pagesPerRow),A(c)&&(a.firstRowLoaded=0>a.firstRowLoaded?c:a.firstRowLoaded,B(c),a.lastRowLoaded=c)})},o=function(d){N(d,function(c){d>c.max_zoom&&(d=0);0<a.adaptivePadding?(a.horizontalPadding=c.dims.a_wid*a.adaptivePadding,a.verticalPadding=c.dims.a_hei*
a.adaptivePadding):(a.horizontalPadding=a.fixedPadding,a.verticalPadding=a.fixedPadding);a.totalHeight=c.dims.t_hei+a.verticalPadding*(a.numPages+1);a.zoomLevel=d;a.dimAfterZoom=a.totalHeight;a.enableZoomSlider&&P();for(var f=0,e=0;e<a.numPages;e++)a.heightAbovePages[e]=f,f=a.heightAbovePages[e]+a.pages[e].h+a.verticalPadding,v(e)&&(m(e),a.lastPageLoaded=e);b(a.innerSelector).css("height",Math.round(a.totalHeight));c=c.dims.max_w+2*a.horizontalPadding<a.panelWidth?a.panelWidth:c.dims.max_w+2*a.horizontalPadding;
b(a.innerSelector).css("width",Math.round(c));L();a.firstAjaxRequest?b.executeCallback(a.onReady):a.dimBeforeZoom!==a.dimAfterZoom?(b.executeCallback(a.onZoom,d),a.dimBeforeZoom>a.dimAfterZoom?(b.executeCallback(a.onZoomOut,d),b.executeCallback(a.zoomOutCallback,d),a.zoomOutCallback=null):(b.executeCallback(a.onZoomIn,d),b.executeCallback(a.zoomInCallback,d),a.zoomInCallback=null)):b.executeCallback(a.onFullscreen,d);a.dimBeforeZoom=a.dimAfterZoom;a.scaleWait&&(a.scaleWait=!1)})},t=function(d){if(a.zoomLevel!=
d&&d>=a.minZoomLevel&&d<=a.maxZoomLevel)return o(d),b(a.selector+"zoom-slider").slider({value:d}),!0;b.executeCallback(a.zoomInCallback,a.zoomLevel);b.executeCallback(a.zoomOutCallback,a.zoomLevel);a.zoomOutCallback=null;a.zoomInCallback=null;return!1},Q=function(d){a.verticalOffset=b(a.outerSelector).scrollTop();a.horizontalOffset=b(a.outerSelector).scrollLeft();a.inGrid&&u(!0);a.doubleClick=!1;t(d)},s=function(d,f,e){f||(f=0);e||(e=0);if(a.inGrid){if(e=Math.ceil(d/a.pagesPerRow)-1,g(e))return f=
e*a.rowHeight,b(a.outerSelector).scrollTop(f),p(d-1),a.currentPageIndex=d-1,!0}else if(pageIndex=d-1,c(pageIndex))return f=a.heightAbovePages[pageIndex]+f,p(pageIndex),b(a.outerSelector).scrollTop(f),e=0<e?e:(b(a.innerSelector).width()-a.panelWidth)/2,b(a.outerSelector).scrollLeft(e),b.executeCallback(a.onJump,d),!0;return!1},R=function(d){var c;if(a.zoomLevel===a.maxZoomLevel)if(d.ctrlKey||a.ctrlKey)c=a.zoomLevel-1;else return;else if(a.zoomLevel===a.minZoomLevel){if(d.ctrlKey||a.ctrlKey)return;
c=a.zoomLevel+1}else c=d.ctrlKey||a.ctrlKey?a.zoomLevel-1:a.zoomLevel+1;a.numClicks=0;a.centerX=d.pageX-a.viewerXOffset+b(a.outerSelector).scrollLeft();a.centerY=d.pageY-a.viewerYOffset+b(a.outerSelector).scrollTop();a.doubleClick=!0;t(c)},S=function(){a.verticalOffset=b(a.outerSelector).scrollTop();a.horizontalOffset=b(a.outerSelector).scrollLeft();a.doubleClick=!1;b(a.innerSelector).text("");a.inFullscreen?(null!==a.fullscreenStatusbar&&(a.fullscreenStatusbar.pnotify({pnotify_animation:"none"}),
a.fullscreenStatusbar.pnotify_remove(),a.fullscreenStatusbar=null),b(a.outerSelector).removeClass("fullscreen"),a.inFullscreen=!1,b(a.selector+"fullscreen").css("position","absolute").css("z-index","8999"),b.executeCallback(a.onFullscreenExit)):X();a.panelWidth=parseInt(b(a.outerSelector).width(),10)-a.scrollbarWidth;a.panelHeight=parseInt(b(a.outerSelector).height(),10);b(a.innerSelector).width(a.panelWidth);a.inGrid?z():o(a.zoomLevel)},X=function(){null===a.fullscreenStatusbar&&I("none");b(a.selector+
"fullscreen").css("position","fixed").css("z-index","9001");b(a.outerSelector).addClass("fullscreen");a.inFullscreen=!0;b("body").css("overflow","hidden");b.executeCallback(a.onFullscreenEnter);var d;b(window).resize(function(){clearTimeout(d);d=setTimeout(function(){a.panelHeight=parseInt(b(a.outerSelector).height(),10);a.panelWidth=parseInt(b(a.outerSelector).width(),10);J(1)},10)})},D=function(){a.inGrid?u():C();b.executeCallback(a.onGrid)},C=function(){a.desiredXOffset=b(a.outerSelector).scrollLeft();
a.desiredYOffset=T();a.inGrid=!0;z()},u=function(d){a.gridScrollTop=b(a.outerSelector).scrollTop();a.inGrid=!1;0>a.goDirectlyTo&&(a.goDirectlyTo=a.currentPageIndex);d||o(a.zoomLevel)},Y=function(){a.enableGrid&&b(a.selector+"grid-icon").click(function(){D()});a.enableFullscreen&&b(a.selector+"fullscreen").click(function(){S()});b(a.innerSelector).mouseover(function(){b(this).removeClass("grabbing").addClass("grab")});b(a.innerSelector).mouseout(function(){b(this).removeClass("grab")});b(a.innerSelector).mousedown(function(){b(this).removeClass("grab").addClass("grabbing")});
b(a.innerSelector).mouseup(function(){b(this).removeClass("grabbing").addClass("grab")});b(a.outerSelector+", "+a.innerSelector).dragscrollable({dragSelector:".dragger",acceptPropagatedEvent:!0});b(a.outerSelector).scroll(function(){if(a.inGrid){a.scrollSoFar=b(a.outerSelector).scrollTop();var d=a.scrollSoFar-a.prevVptTop;0>d?(r(a.firstRowLoaded,-1),f(-1),y(a.lastRowLoaded,-1)):0<d&&(y(a.firstRowLoaded,1),f(1),r(a.lastRowLoaded,1));0!==d&&(b.executeCallback(a.onScroll,a.scrollSoFar),0<d?b.executeCallback(a.onScrollDown,
a.scrollSoFar):b.executeCallback(a.onScrollUp,a.scrollSoFar))}else a.scrollSoFar=b(a.outerSelector).scrollTop(),J(a.scrollSoFar-a.prevVptTop);a.prevVptTop=a.scrollSoFar});b(a.outerSelector).bind("contextmenu",function(b){var d=b.originalEvent;d.ctrlKey&&(a.ctrlKey=!0,a.numClicks++,1<a.numClicks&&(R(b),a.numClicks=0),d.preventDefault(),d.stopPropagation(),a.ctrlKey=!1)});b(a.outerSelector).dblclick(function(d){a.viewerXOffset=b(this).offset().left;a.viewerYOffset=b(this).offset().top;if(a.inGrid){var c=
d.pageX-a.viewerXOffset+b(a.outerSelector).scrollLeft(),d=d.pageY-a.viewerYOffset+b(a.outerSelector).scrollTop(),c=Math.floor(d/a.rowHeight)*a.pagesPerRow+Math.floor(c/(a.panelWidth/a.pagesPerRow));a.desiredXOffset=0;a.desiredYOffset=0;a.goDirectlyTo=c;u()}else R(d)});if(a.mobileSafari){b(a.outerSelector).oneFingerScroll();var d=[];d.push('<meta name="viewport" content="user-scalable=no, width=device-width" />');d.push('<meta name="apple-mobile-web-app-capable" content="yes" />');d.push('<meta name="apple-mobile-web-app-status-bar-style" content="black" />');
b("head").append(d.join("\n"));b("body").bind("touchmove",function(a){a.originalEvent.preventDefault()});b("body").bind("gestureend",function(b){b=b.originalEvent;if(!a.scaleWait)if(a.inGrid)u();else a:{var d=a.zoomLevel;if(1<b.scale&&d<a.maxZoomLevel)d++;else if(1>b.scale&&d>a.minZoomLevel)d--;else break a;a.scaleWait=!0;Q(d)}return!1})}if(a.enableSpaceScroll||a.enableKeyScroll){var c=b.ui.keyCode.SPACE,e=b.ui.keyCode.PAGE_UP,g=b.ui.keyCode.PAGE_DOWN,h=b.ui.keyCode.HOME,i=b.ui.keyCode.END;b(document).keydown(function(d){if(a.enableSpaceScroll&&
d.keyCode==c||a.enableKeyScroll&&d.keyCode==g)return b(a.outerSelector).scrollTop(a.scrollSoFar+a.panelHeight),!1;if(a.enableKeyScroll&&d.keyCode==e)return b(a.outerSelector).scrollTop(a.scrollSoFar-a.panelHeight),!1;if(a.enableKeyScroll&&d.keyCode==h)return b(a.outerSelector).scrollTop(0),!1;if(a.enableKeyScroll&&d.keyCode==i)return b(a.outerSelector).scrollTop(a.totalHeight),!1})}},I=function(d){a.fullscreenStatusbar=b.pnotify({pnotify_text:'<form id="'+a.ID+'goto-page-fullscreen"><input placeholder="'+
a.numPages+'" type="text" size="4" id="'+a.ID+'goto-input-fullscreen" /><input type="submit" value="Go"></form><div id="'+a.ID+'tools-fullscreen" style="height: 60px;"></div><div id="'+a.ID+'link-fullscreen"><a href="">Link</a></div>',pnotify_title:(a.enableGrid?'<div id="'+a.ID+'grid-icon-fullscreen"></div>':"")+'Page: <span id="'+a.ID+'page-number-fullscreen">'+(a.currentPageIndex+1)+"</span>",pnotify_history:!1,pnotify_width:"160px",pnotify_hide:!1,pnotify_notice_icon:"",pnotify_animation:d,pnotify_before_close:function(){a.fullscreenStatusbar=
null}});b(a.selector+"link-fullscreen a").click(function(){b("body").prepend('<div id="'+a.ID+'link-popup-fullscreen"><input id="'+a.ID+'link-popup-input-fullscreen" class="diva-input" value="'+E()+'" /></div>');var d=b("div.ui-pnotify").offset();b(a.selector+"link-popup-fullscreen").css("left",d.left+"px").css("top",d.top+b("div.ui-pnotify").height()+5+"px");b("body").mouseup(function(d){d=d.target.id;d!==a.ID+"link-popup-fullscreen"&&d!==a.ID+"link-popup-input-fullscreen"&&b(a.selector+"link-popup-fullscreen").remove()});
b(a.outerSelector).scroll(function(){b(a.selector+"link-popup-fullscreen").remove()});return!1});b(a.selector+"grid-icon-fullscreen").click(function(){D()});a.inGrid&&a.enableGridSlider?O():a.enableZoomSlider&&P();b(a.selector+"goto-page-fullscreen").submit(function(){var d=parseInt(b(a.selector+"goto-input-fullscreen").val(),10);s(d)||alert("Invalid page number");return!1})},P=function(){b(a.selector+"slider").remove();b(a.selector+"slider-label").remove();b(a.selector+(a.inFullscreen?"tools-fullscreen":
"tools")).prepend('<div id="'+a.ID+'slider"></div>');b(a.selector+"slider").slider({value:a.zoomLevel,min:a.minZoomLevel,max:a.maxZoomLevel,step:1,slide:function(a,b){Q(b.value)}});b(a.selector+"slider").after('<div id="'+a.ID+'slider-label">Zoom level: <span>'+a.zoomLevel+"</span></div>")},O=function(){b(a.selector+"slider").remove();b(a.selector+"slider-label").remove();b(a.selector+(a.inFullscreen?"tools-fullscreen":"tools")).prepend('<div id="'+a.ID+'slider"></div>');b(a.selector+"slider").slider({value:a.pagesPerRow,
min:a.minPagesPerRow,max:a.maxPagesPerRow,step:1,slide:function(b,c){a.pagesPerRow=c.value;C()}});b(a.selector+"slider").after('<div id="'+a.ID+'slider-label">Pages per row: <span>'+a.pagesPerRow+"</span></div>")},Z=function(){b(a.selector+"tools").append('<form id="'+a.ID+'goto-page">Go to page <input type="text" size="3" id="'+a.ID+'goto-input" /> <input type="submit" value="Go" /><br /><div id="'+a.ID+'current">Current page: <span>1</span> of <label></label> <a href="" id="'+a.ID+'link">(link)</a></div></form>');
b(a.selector+"link").click(function(){var d=b(a.outerSelector).offset().left+a.panelWidth;b("body").prepend('<div id="'+a.ID+'link-popup"><input id="'+a.ID+'link-popup-input" class="diva-input" type="text" value="'+E()+'"/></div>');b(a.selector+"link-popup").css("top",b(a.outerSelector).offset().top+"px").css("left",d-298+"px");b("body").mouseup(function(d){d=d.target.id;d==a.ID+"link-popup"||d==a.ID+"link-popup-input"||b(a.selector+"link-popup").remove()});b(a.outerSelector).scroll(function(){b(a.selector+
"link-popup").remove()});return!1});b(a.selector+"goto-page").submit(function(){var d=parseInt(b(a.selector+"goto-input").val(),10);s(d)||alert("Invalid page number");return!1})},M=function(b){for(var c=0;c<a.numPages;c++)if(a.pages[c].fn==b)return c;return-1},T=function(){var d=b(a.outerSelector).scrollTop();return parseInt(d-a.heightAbovePages[a.currentPageIndex],10)},U=function(){return{f:a.inFullscreen,g:a.inGrid,z:a.zoomLevel,n:a.pagesPerRow,i:a.currentPageIndex,y:a.inGrid?a.documentLeftScroll:
T(),x:a.inGrid?a.documentLeftScroll:b(a.outerSelector).scrollLeft(),gy:a.inGrid?b(a.outerSelector).scrollTop():a.gridScrollTop,h:a.panelHeight,w:a.panelWidth+a.scrollbarWidth}},V=function(){var b=U(),c=b.i;b.i=a.enableFilename?a.pages[c].fn:c+1;var c=[],e;for(e in b)b[e]&&c.push(e+a.hashParamSuffix+"="+b[e]);return c.join("&")},E=function(){return location.protocol+location.host+location.pathname+"#"+V()},F=function(d,c){if(d>=a.minWidth&&c>=a.minHeight){var e=a.panelWidth;b(a.outerSelector).width(d);
b(a.outerSelector).height(c);a.panelHeight=c;a.panelWidth=d-a.scrollbarWidth;b(a.outerSelector).css("float",a.viewerFloat);b(a.parentSelector).width(d);a.inGrid?z():e!==a.panelWidth&&o(a.zoomLevel)}};(function(){a.scrollbarWidth=b.getScrollbarWidth();a.mobileSafari="iPad"==navigator.platform||"iPhone"==navigator.platform||"iPod"==navigator.platform;a.elementSelector="#"+b(e).attr("id");a.ID=b.generateId("diva-");a.selector="#"+a.ID;var d=parseInt(a.ID,10);1<d&&(a.hashParamSuffix=d);a.outerSelector=
a.selector+"outer";a.innerSelector=a.selector+"inner";(a.zoomSlider||a.enableGotoPage||a.enableGrid)&&b(a.elementSelector).prepend('<div id="'+a.ID+'tools"></div>');a.enableGotoPage&&Z();a.enableGrid&&b(a.selector+"tools").prepend('<div id="'+a.ID+'grid-icon"></div>');b(a.elementSelector).append('<div id="'+a.ID+'outer"></div>');b(a.outerSelector).append('<div id="'+a.ID+'inner" class="dragger"></div>');a.mobileSafari?(a.panelWidth=screen.width-a.scrollbarWidth,a.panelHeight="iPad"==navigator.platform?
screen.height-170:screen.height-250,b(a.elementSelector).css("width",a.panelWidth),b(a.outerSelector).css("width",a.panelWidth+"px"),b(a.outerSelector).css("height",a.panelHeight+"px")):(a.panelWidth=parseInt(b(a.elementSelector).width(),10)-18,b(a.outerSelector).css("width",a.panelWidth+18+"px"),a.panelHeight=parseInt(b(a.outerSelector).height(),10));a.enableFullscreen&&b(a.elementSelector).prepend('<div id="'+a.ID+'fullscreen"></div>');d=parseInt(b.getHashParam("n"+a.hashParamSuffix),10);d>=a.minPagesPerRow&&
d<=a.maxPagesPerRow&&(a.pagesPerRow=d);d=b.getHashParam("z"+a.hashParamSuffix);""!==d&&(d=parseInt(d,10),d>=a.minZoomLevel&&(a.zoomLevel=d));d=parseInt(b.getHashParam("y"+a.hashParamSuffix),10);0<d&&(a.desiredYOffset=d);d=parseInt(b.getHashParam("x"+a.hashParamSuffix),10);0<d&&(a.desiredXOffset=d);"true"===b.getHashParam("f"+a.hashParamSuffix)&&a.enableFullscreen&&S();d=parseInt(b.getHashParam("gy"+a.hashParamSuffix),10);0<d&&(a.gridScrollTop=d);var d=parseInt(b.getHashParam("h"+a.hashParamSuffix),
10),c=parseInt(b.getHashParam("w"+a.hashParamSuffix),10);a.minHeight=parseInt(b(a.outerSelector).css("min-height"));a.minWidth=parseInt(b(a.outerSelector).css("min-width"));(0<d||0<c)&&F(c,d);"true"===b.getHashParam("g"+a.hashParamSuffix)&&a.enableGrid&&D();!a.inFullscreen&&!a.inGrid&&o(a.zoomLevel);Y()})();this.getItemTitle=function(){return a.itemTitle};this.gotoPage=function(a){return s(a)};this.getCurrentPage=function(){return a.currentPageIndex};this.getZoomLevel=function(){return a.zoomLevel};
this.zoomIn=function(b){a.zoomInCallback=b;return t(a.zoomLevel+1)};this.zoomOut=function(b){a.zoomOutCallback=b;return t(a.zoomLevel-1)};this.inViewport=function(b,c,e){b=a.heightAbovePages[b-1]+c;return k(b,b+e)};this.gotoPageByName=function(b){for(var c=0;c<a.numPages;c++)if(a.pages[c].fn==b)return s(c),!0;return!1};this.getCurrentURL=function(){return E()};this.getURLHash=function(){return V()};this.getState=function(){return U()};this.setState=function(b){a.gridScrollTop=b.gy;a.goDirectlyTo=
isNaN(b.i)?M(b.i):b.i;a.desiredXOffset=b.x;a.desiredYOffset=b.y;b.g?(a.zoomLevel=b.z,a.inGrid?a.pagesPerRow===b.n?K():(a.pagesPerRow=b.n,C()):(a.pagesPerRow=b.n,a.inGrid=!0,z())):(a.pagesPerRow=b.n,a.inGrid?(a.zoomLevel=b.z,u()):a.zoomLevel===b.z?L():t(b.z));(a.panelHeight!==b.h||a.panelWidth+a.scrollbarWidth!==b.w)&&F(b.h,b.w)};this.resize=function(a,b){F(a,b)}};b.fn.diva=function(e){return this.each(function(){var h=b(this);if(!h.data("diva")){e.parentSelector=h;var a=new i(this,e);h.data("diva",
a)}})}})(jQuery);
/* Latest commit: 53fd3f24cb769d6733efde1c54e7c76ac6ba2c66 */
