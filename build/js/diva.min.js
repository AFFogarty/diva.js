(function(b){var d=1;b.generateId=function(b){var e;do e=d++ +(b?"-"+b:"");while(document.getElementById(e));return e}})(jQuery);
(function(b){b.getScrollbarWidth=function(){var b=document.createElement("p");b.style.width="100%";b.style.height="200px";var c=document.createElement("div");c.style.position="absolute";c.style.top="0px";c.style.left="0px";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.appendChild(b);document.body.appendChild(c);var e=b.offsetWidth;c.style.overflow="scroll";b=b.offsetWidth;e==b&&(b=c.clientWidth);document.body.removeChild(c);return e-b}})(jQuery);
(function(b){b.getHashParam=function(b){var c=window.location.hash;if(""!=c){var e=0<c.indexOf("&"+b+"=")?c.indexOf("&"+b+"="):c.indexOf("#"+b+"=");if(0<=e)return e+=b.length+2,b=c.indexOf("&",e),b>e?c.substring(e,b):0>b?c.substring(e):""}return!1}})(jQuery);
(function(b){b.updateHashParam=function(d,c){var e=b.getHashParam(d),a=window.location.hash;if(e!==c)if("string"==typeof e){var f=0<a.indexOf("&"+d+"=")?a.indexOf("&"+d+"="):a.indexOf("#"+d+"="),e=f+d.length+2+e.length;window.location.replace(a.substring(0,f)+(0==f?"#":"&")+d+"="+c+a.substring(e))}else 0===a.length?window.location.replace("#"+d+"="+c):window.location.replace(a+"&"+d+"="+c)}})(jQuery);
jQuery.fn.oneFingerScroll=function(){var b,d;$(this).bind("touchstart",function(c){c=c.originalEvent;b=$(this).scrollTop()+c.touches[0].pageY;d=$(this).scrollLeft()+c.touches[0].pageX;c.preventDefault()});$(this).bind("touchmove",function(c){c=c.originalEvent;$(this).scrollTop(b-c.touches[0].pageY);$(this).scrollLeft(d-c.touches[0].pageX);c.preventDefault()});return this};
(function(b){b.fn.dragscrollable=function(d){var c,e,a,f=b.extend({dragSelector:">:first",acceptPropagatedEvent:!0,preventDefault:!0},d||{});a=function(a){if(1!=a.which||!a.data.acceptPropagatedEvent&&a.target!=this)return!1;a.data.lastCoord={left:a.clientX,top:a.clientY};b.event.add(document,"mouseup",c,a.data);b.event.add(document,"mousemove",e,a.data);if(a.data.preventDefault)return a.preventDefault(),!1};e=function(a){var b=a.clientX-a.data.lastCoord.left,c=a.clientY-a.data.lastCoord.top;a.data.scrollable.scrollLeft(a.data.scrollable.scrollLeft()-
b);a.data.scrollable.scrollTop(a.data.scrollable.scrollTop()-c);a.data.lastCoord={left:a.clientX,top:a.clientY};if(a.data.preventDefault)return a.preventDefault(),!1};c=function(a){b.event.remove(document,"mousemove",e);b.event.remove(document,"mouseup",c);if(a.data.preventDefault)return a.preventDefault(),!1};this.each(function(){var c={scrollable:b(this),acceptPropagatedEvent:f.acceptPropagatedEvent,preventDefault:f.preventDefault};b(this).find(f.dragSelector).bind("mousedown",c,a)})}})(jQuery);
(function(b,d){function c(a){return!b(a).parents().andSelf().filter(function(){return"hidden"===b.curCSS(this,"visibility")||b.expr.filters.hidden(this)}).length}function e(a,d){var e=a.nodeName.toLowerCase();if("area"===e){var e=a.parentNode,k=e.name;if(!a.href||!k||"map"!==e.nodeName.toLowerCase())return!1;e=b("img[usemap=#"+k+"]")[0];return!!e&&c(e)}return(/input|select|textarea|button|object/.test(e)?!a.disabled:"a"==e?a.href||d:d)&&c(a)}b.ui=b.ui||{};b.ui.version||(b.extend(b.ui,{version:"1.8.17",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),b.fn.extend({propAttr:b.fn.prop||b.fn.attr,_focus:b.fn.focus,focus:function(a,c){return"number"==typeof a?this.each(function(){var d=
this;setTimeout(function(){b(d).focus();c&&c.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;b.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?a=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.curCSS(this,"position",1))&&/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0):a=this.parents().filter(function(){return/(auto|scroll)/.test(b.curCSS(this,
"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?b(document):a},zIndex:function(a){if(a!==d)return this.css("zIndex",a);if(this.length)for(var a=b(this[0]),c;a.length&&a[0]!==document;){c=a.css("position");if("absolute"===c||"relative"===c||"fixed"===c)if(c=parseInt(a.css("zIndex"),10),!isNaN(c)&&0!==c)return c;a=a.parent()}return 0},disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),b.each(["Width","Height"],function(a,c){function e(a,c,d,f){b.each(k,function(){c-=parseFloat(b.curCSS(a,"padding"+this,!0))||0;d&&(c-=parseFloat(b.curCSS(a,"border"+this+"Width",!0))||0);f&&(c-=parseFloat(b.curCSS(a,"margin"+this,!0))||0)});return c}var k="Width"===c?["Left","Right"]:["Top","Bottom"],h=c.toLowerCase(),i={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,
outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+c]=function(a){return a===d?i["inner"+c].call(this):this.each(function(){b(this).css(h,e(this,a)+"px")})};b.fn["outer"+c]=function(a,d){return"number"!=typeof a?i["outer"+c].call(this,a):this.each(function(){b(this).css(h,e(this,a,!0,d)+"px")})}}),b.extend(b.expr[":"],{data:function(a,c,d){return!!b.data(a,d[3])},focusable:function(a){return e(a,!isNaN(b.attr(a,"tabindex")))},tabbable:function(a){var c=b.attr(a,"tabindex"),d=isNaN(c);
return(d||0<=c)&&e(a,!d)}}),b(function(){var a=document.body,c=a.appendChild(c=document.createElement("div"));b.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=100===c.offsetHeight;b.support.selectstart="onselectstart"in c;a.removeChild(c).style.display="none"}),b.extend(b.ui,{plugin:{add:function(a,c,d){var a=b.ui[a].prototype,e;for(e in d)a.plugins[e]=a.plugins[e]||[],a.plugins[e].push([c,d[e]])},call:function(a,b,c){if((b=a.plugins[b])&&a.element[0].parentNode)for(var d=
0;d<b.length;d++)a.options[b[d][0]]&&b[d][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,c){if("hidden"===b(a).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;if(0<a[d])return!0;a[d]=1;e=0<a[d];a[d]=0;return e},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(a,c,d,e,h,i){return b.ui.isOverAxis(a,d,h)&&b.ui.isOverAxis(c,e,i)}}))})(jQuery);
(function(b,d){if(b.cleanData){var c=b.cleanData;b.cleanData=function(a){for(var d=0,e;null!=(e=a[d]);d++)try{b(e).triggerHandler("remove")}catch(k){}c(a)}}else{var e=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){c||(!a||b.filter(a,[this]).length)&&b("*",this).add([this]).each(function(){try{b(this).triggerHandler("remove")}catch(a){}});return e.call(b(this),a,c)})}}b.widget=function(a,c,d){var e=a.split(".")[0],h;a=a.split(".")[1];h=e+"-"+a;d||(d=c,c=b.Widget);b.expr[":"][h]=
function(c){return!!b.data(c,a)};b[e]=b[e]||{};b[e][a]=function(a,b){arguments.length&&this._createWidget(a,b)};c=new c;c.options=b.extend(!0,{},c.options);b[e][a].prototype=b.extend(!0,c,{namespace:e,widgetName:a,widgetEventPrefix:b[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:h},d);b.widget.bridge(a,b[e][a])};b.widget.bridge=function(a,c){b.fn[a]=function(e){var k="string"==typeof e,h=Array.prototype.slice.call(arguments,1),i=this,e=!k&&h.length?b.extend.apply(null,[!0,e].concat(h)):e;if(k&&
"_"===e.charAt(0))return i;k?this.each(function(){var c=b.data(this,a),f=c&&b.isFunction(c[e])?c[e].apply(c,h):c;if(f!==c&&f!==d)return i=f,!1}):this.each(function(){var d=b.data(this,a);d?d.option(e||{})._init():b.data(this,a,new c(e,this))});return i}};b.Widget=function(a,b){arguments.length&&this._createWidget(a,b)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=b.extend(!0,
{},this.options,this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(a,c){var e=a;if(0===arguments.length)return b.extend({},this.options);if("string"==typeof a){if(c===d)return this.options[a];e={};e[a]=c}this._setOptions(e);return this},_setOptions:function(a){var c=this;b.each(a,function(a,b){c._setOption(a,b)});return this},_setOption:function(a,b){this.options[a]=b;"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
b);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,c,d){var e,h=this.options[a];d=d||{};c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();c.target=this.element[0];a=c.originalEvent;if(a)for(e in a)e in c||(c[e]=a[e]);this.element.trigger(c,d);return!(b.isFunction(h)&&!1===h.call(this.element[0],c,d)||c.isDefaultPrevented())}}})(jQuery);
(function(b){var d=!1;b(document).mouseup(function(){d=!1});b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(b){return c._mouseDown(b)}).bind("click."+this.widgetName,function(d){if(!0===b.data(d.target,c.widgetName+".preventClickEvent"))return b.removeData(d.target,c.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(c){if(!d){this._mouseStarted&&this._mouseUp(c);this._mouseDownEvent=c;var e=this,a=1==c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?b(c.target).closest(this.options.cancel).length:!1;if(!a||f||!this._mouseCapture(c))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=
!1!==this._mouseStart(c),!this._mouseStarted))return c.preventDefault(),!0;!0===b.data(c.target,this.widgetName+".preventClickEvent")&&b.removeData(c.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return e._mouseMove(a)};this._mouseUpDelegate=function(a){return e._mouseUp(a)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);c.preventDefault();d=!0;return!0}},_mouseMove:function(c){if(b.browser.msie&&
!(9<=document.documentMode)&&!c.button)return this._mouseUp(c);if(this._mouseStarted)return this._mouseDrag(c),c.preventDefault();this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,c),this._mouseStarted?this._mouseDrag(c):this._mouseUp(c));return!this._mouseStarted},_mouseUp:function(c){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&
(this._mouseStarted=!1,c.target==this._mouseDownEvent.target&&b.data(c.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(c));return!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(b){b.widget("ui.slider",b.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var d=this,c=this.options,e=this.element.find(".handle").addClass("ui-state-default ui-corner-all"),a=c.values&&c.values.length||1,f=[];this._keySliding=!1;this._mouseSliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+
this.orientation+" ui-widget ui-widget-content ui-corner-all"+(c.disabled?" ui-slider-disabled ui-disabled":""));this.range=b([]);c.range&&(!0===c.range&&(c.values||(c.values=[this._valueMin(),this._valueMin()]),c.values.length&&2!==c.values.length&&(c.values=[c.values[0],c.values[0]])),this.range=b("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===c.range||"max"===c.range?" ui-slider-range-"+c.range:"")));for(var g=e.length;g<a;g+=1)f.push("<a class='handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=e.add(b(f.join("")).appendTo(d.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){c.disabled||b(this).addClass("hover")},function(){b(this).removeClass("hover")}).focus(function(){c.disabled?b(this).blur():(b(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),b(this).addClass("ui-state-focus"))}).blur(function(){b(this).removeClass("ui-state-focus")});this.handles.each(function(a){b(this).data("index.handle",
a)});this.handles.keydown(function(a){var c=!0,e=b(this).data("index.handle"),f,g,j;if(!d.options.disabled){switch(a.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(c=!1,!d._keySliding&&(d._keySliding=!0,b(this).addClass("active"),f=d._start(a,e),!1===f))return}f=d.options.step;d.options.values&&d.options.values.length?g=j=d.values(e):g=j=d.value();
switch(a.keyCode){case b.ui.keyCode.HOME:j=d._valueMin();break;case b.ui.keyCode.END:j=d._valueMax();break;case b.ui.keyCode.PAGE_UP:j=d._trimAlignValue(g+(d._valueMax()-d._valueMin())/5);break;case b.ui.keyCode.PAGE_DOWN:j=d._trimAlignValue(g-(d._valueMax()-d._valueMin())/5);break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(g===d._valueMax())return;j=d._trimAlignValue(g+f);break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(g===d._valueMin())return;j=d._trimAlignValue(g-f)}d._slide(a,e,j);
return c}}).keyup(function(a){var c=b(this).data("index.handle");d._keySliding&&(d._keySliding=!1,d._stop(a,c),d._change(a,c),b(this).removeClass("active"))});this._refreshValue();this._animateOff=!1},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(d){var c=
this.options,e,a,f,g,k,h,i,m;if(c.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();e={x:d.pageX,y:d.pageY};a=this._normValueFromMouse(e);f=this._valueMax()-this._valueMin()+1;k=this;this.handles.each(function(c){var d=Math.abs(a-k.values(c));f>d&&(f=d,g=b(this),h=c)});!0===c.range&&this.values(1)===c.min&&(h+=1,g=b(this.handles[h]));c=this._start(d,h);if(!1===c)return!1;this._mouseSliding=!0;k._handleIndex=
h;g.addClass("active").focus();i=g.offset();m=!b(d.target).parents().andSelf().is(".handle");this._clickOffset=m?{left:0,top:0}:{left:d.pageX-i.left-g.width()/2,top:d.pageY-i.top-g.height()/2-(parseInt(g.css("borderTopWidth"),10)||0)-(parseInt(g.css("borderBottomWidth"),10)||0)+(parseInt(g.css("marginTop"),10)||0)};this.handles.hasClass("hover")||this._slide(d,h,a);this._animateOff=!0;return!0},_mouseStart:function(){return!0},_mouseDrag:function(b){var c=this._normValueFromMouse({x:b.pageX,y:b.pageY});
this._slide(b,this._handleIndex,c);return!1},_mouseStop:function(b){this.handles.removeClass("active");this._mouseSliding=!1;this._stop(b,this._handleIndex);this._change(b,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=!1;return!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(b){var c,e,a,f;"horizontal"===this.orientation?(c=this.elementSize.width,e=b.x-this.elementOffset.left-
(this._clickOffset?this._clickOffset.left:0)):(c=this.elementSize.height,e=b.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));a=e/c;1<a&&(a=1);0>a&&(a=0);"vertical"===this.orientation&&(a=1-a);f=this._valueMax()-this._valueMin();b=this._valueMin()+a*f;return this._trimAlignValue(b)},_start:function(b,c){var e={handle:this.handles[c],value:this.value()};this.options.values&&this.options.values.length&&(e.value=this.values(c),e.values=this.values());return this._trigger("start",
b,e)},_slide:function(b,c,e){var a,f,g;this.options.values&&this.options.values.length?(a=this.values(c?0:1),2===this.options.values.length&&!0===this.options.range&&(0===c&&e>a||1===c&&e<a)&&(e=a),e!==this.values(c)&&(f=this.values(),f[c]=e,g=this._trigger("slide",b,{handle:this.handles[c],value:e,values:f}),this.values(c?0:1),!1!==g&&this.values(c,e,!0))):e!==this.value()&&(g=this._trigger("slide",b,{handle:this.handles[c],value:e}),!1!==g&&this.value(e))},_stop:function(b,c){var e={handle:this.handles[c],
value:this.value()};this.options.values&&this.options.values.length&&(e.value=this.values(c),e.values=this.values());this._trigger("stop",b,e)},_change:function(b,c){if(!this._keySliding&&!this._mouseSliding){var e={handle:this.handles[c],value:this.value()};this.options.values&&this.options.values.length&&(e.value=this.values(c),e.values=this.values());this._trigger("change",b,e)}},value:function(b){if(arguments.length)this.options.value=this._trimAlignValue(b),this._refreshValue(),this._change(null,
0);else return this._value()},values:function(d,c){var e,a,f;if(1<arguments.length)this.options.values[d]=this._trimAlignValue(c),this._refreshValue(),this._change(null,d);else{if(!arguments.length)return this._values();if(!b.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(d):this.value();e=this.options.values;a=arguments[0];for(f=0;f<e.length;f+=1)e[f]=this._trimAlignValue(a[f]),this._change(null,f);this._refreshValue()}},_setOption:function(d,c){var e,a=
0;b.isArray(this.options.values)&&(a=this.options.values.length);b.Widget.prototype._setOption.apply(this,arguments);switch(d){case "disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(e=0;e<a;e+=1)this._change(null,e);this._animateOff=!1}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b)},_values:function(b){var c,e;if(arguments.length)return c=this.options.values[b],c=this._trimAlignValue(c),c;c=this.options.values.slice();for(e=0;e<c.length;e+=1)c[e]=
this._trimAlignValue(c[e]);return c},_trimAlignValue:function(b){if(b<=this._valueMin())return this._valueMin();if(b>=this._valueMax())return this._valueMax();var c=0<this.options.step?this.options.step:1,e=(b-this._valueMin())%c,b=b-e;2*Math.abs(e)>=c&&(b+=0<e?c:-c);return parseFloat(b.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var d=this.options.range,c=this.options,e=this,a=this._animateOff?!1:c.animate,f,g=
{},k,h,i,m;this.options.values&&this.options.values.length?this.handles.each(function(d){f=100*((e.values(d)-e._valueMin())/(e._valueMax()-e._valueMin()));g["horizontal"===e.orientation?"left":"bottom"]=f+"%";b(this).stop(1,1)[a?"animate":"css"](g,c.animate);!0===e.options.range&&("horizontal"===e.orientation?(0===d&&e.range.stop(1,1)[a?"animate":"css"]({left:f+"%"},c.animate),1===d&&e.range[a?"animate":"css"]({width:f-k+"%"},{queue:!1,duration:c.animate})):(0===d&&e.range.stop(1,1)[a?"animate":"css"]({bottom:f+
"%"},c.animate),1===d&&e.range[a?"animate":"css"]({height:f-k+"%"},{queue:!1,duration:c.animate})));k=f}):(h=this.value(),i=this._valueMin(),m=this._valueMax(),f=m!==i?100*((h-i)/(m-i)):0,g["horizontal"===e.orientation?"left":"bottom"]=f+"%",this.handle.stop(1,1)[a?"animate":"css"](g,c.animate),"min"===d&&"horizontal"===this.orientation&&this.range.stop(1,1)[a?"animate":"css"]({width:f+"%"},c.animate),"max"===d&&"horizontal"===this.orientation&&this.range[a?"animate":"css"]({width:100-f+"%"},{queue:!1,
duration:c.animate}),"min"===d&&"vertical"===this.orientation&&this.range.stop(1,1)[a?"animate":"css"]({height:f+"%"},c.animate),"max"===d&&"vertical"===this.orientation&&this.range[a?"animate":"css"]({height:100-f+"%"},{queue:!1,duration:c.animate}))}});b.extend(b.ui.slider,{version:"1.8.17"})})(jQuery);window.divaPlugins=[];
(function(b){var d=function(c,d){var a=b.extend({},{adaptivePadding:0.05,contained:!1,divaserveURL:"",enableAutoTitle:!0,enableFilename:!0,enableFullscreen:!0,enableGotoPage:!0,enableGrid:!0,enableGridSlider:!0,enableKeyScroll:!0,enableLink:!0,enableSpaceScroll:!1,enableZoomSlider:!0,fixedPadding:10,fixedHeightGrid:!0,iipServerURL:"",inGrid:!1,imageDir:"",maxPagesPerRow:8,maxZoomLevel:-1,minPagesPerRow:2,minZoomLevel:0,onFullscreen:null,onFullscreenEnter:null,onFullscreenExit:null,onGrid:null,onJump:null,
onReady:null,onScroll:null,onScrollDown:null,onScrollUp:null,onZoom:null,onZoomIn:null,onZoomOut:null,pagesPerRow:5,tileFadeSpeed:300,tileHeight:256,tileWidth:256,viewportMargin:200,zoomLevel:2},d);b.extend(a,{centerX:0,centerY:0,ctrlKey:!1,currentPageIndex:0,desiredXOffset:0,desiredYOffset:0,dimAfterZoom:0,dimBeforeZoom:0,doubleClick:!1,elementSelector:"",firstAjaxRequest:!0,firstPageLoaded:-1,firstRowLoaded:-1,goDirectlyTo:-1,gridScrollTop:0,hashParamSuffix:"",heightAbovePages:[],horizontalOffset:0,
horizontalPadding:0,ID:null,inFullscreen:!1,itemTitle:"",lastPageLoaded:-1,lastRowLoaded:-1,leftScrollSoFar:0,maxHeight:0,maxWidth:0,minRatio:0,maxRatio:0,mobileSafari:!1,numClicks:0,numPages:0,numRows:0,pageLoadTimeout:200,pages:[],pageLeftOffsets:[],pageTimeouts:[],pageTools:"",panelHeight:0,panelWidth:0,plugins:[],prevVptTop:0,rowLoadTimeout:50,scaleWait:!1,selector:"",scrollbarWidth:0,scrollLeft:-1,scrollSoFar:0,scrollTop:-1,totalHeight:0,verticalOffset:0,verticalPadding:0,viewerXOffset:0,viewerYOffset:0,
zoomCallbacks:[]});var f=this,g=function(a){if("function"==typeof a){for(var b=[],c=1,d=arguments.length;c<d;c++)b.push(arguments[c]);a.apply(f,b);return!0}return!1},k=function(b,c){var d=a.scrollSoFar-a.viewportMargin,e=d+a.panelHeight+2*a.viewportMargin;return b>=d&&b<=e||b<=d&&c>=e||c>=d&&c<=e},h=function(b){var c=a.heightAbovePages[b],b=c+l(b,"h")+a.verticalPadding;return k(c,b)},i=function(c){var d=a.pages[c].f,e=l(c,"r"),f=l(c,"c"),g=l(c,"w"),n=l(c,"h"),p=a.pages[c].m,r,v,i,j,y,z,w,m=0,t=a.heightAbovePages[c]+
a.verticalPadding;0<b(a.selector+"page-"+c).length||b(a.innerSelector).append('<div id="'+a.ID+"page-"+c+'" style="top: '+t+"px; width: "+g+"px; height: "+n+"px; left: 50%; margin-left: -"+g/2+'px" class="page" data-filename="'+d+'">'+a.pageTools+"</div>");a.pageTimeouts.push(setTimeout(function(){if(h(c)){r=n-(e-1)*a.tileHeight;v=g-(f-1)*a.tileWidth;var l=[],t=[];for(i=0;i<e;i++)for(j=0;j<f;j++){var o=i*a.tileHeight,D=j*a.tileWidth,E=a.tileFadeSpeed?"none":"inline",s=p===a.maxZoomLevel?a.zoomLevel:
a.zoomLevel+(p-a.maxZoomLevel);y=i===e-1?r:a.tileHeight;z=j===f-1?v:a.tileWidth;w=a.iipServerURL+d+"&amp;JTL="+s+","+m;if(s=!(0<b(a.selector+"tile-"+c+"-"+m).length)){var u=a.heightAbovePages[c]+i*a.tileHeight+a.verticalPadding,s=a.pageLeftOffsets[c]+j*a.tileWidth,q=s+a.tileWidth;if(u=k(u,u+a.tileHeight))var u=a.leftScrollSoFar-a.viewportMargin,A=u+a.panelWidth+2*a.viewportMargin,x=q>=u&&q<=A,q=s<=u&&q>=A,u=s>=u&&s<=A||q||x;s=u}s&&t.push('<div id="'+a.ID+"tile-"+c+"-"+m+'"style="display: '+E+"; position: absolute; top: "+
o+"px; left: "+D+"px; background-image: url('"+w+"'); height: "+y+"px; width: "+z+'px;"></div>');l.push(m);m++}0<l.length&&b(a.selector+"page-"+c).append(t.join(""));if(a.tileFadeSpeed)for(t=0;t<l.length;t++)b(a.selector+"tile-"+c+"-"+l[t]).fadeIn(a.tileFadeSpeed)}},a.pageLoadTimeout))},m=function(c){0<b(a.selector+"page-"+c).length&&b(a.selector+"page-"+c).empty().remove()},o=function(b){return 0<=b&&b<a.numRows},j=function(b){return 0<=b&&b<a.numPages},l=function(b,c){return a.pages[b].d[a.zoomLevel][c]},
p=function(b){a.toolbar.setCurrentPage(b+1)},r=function(b){var c=a.currentPageIndex,d=a.currentPageIndex+parseInt(b,10),e=!1;0>b?0<=d&&a.heightAbovePages[d]+l(d,"h")+a.verticalPadding>=a.scrollSoFar&&(e=!0):0<b&&a.heightAbovePages[c]+l(c,"h")+a.verticalPadding<a.scrollSoFar&&(e=!0);return e?(a.currentPageIndex=d,0!==b&&(r(b)||p(d)),!0):!1},n=function(b){var c=Math.floor(a.currentPageIndex/a.pagesPerRow),d=c+parseInt(b,10),e=a.scrollSoFar+a.panelHeight/2,f=!1;if(0>b){if(0<=d&&(a.rowHeight*c>=e||a.rowHeight*
d>=a.scrollSoFar))f=!0}else 0<b&&a.rowHeight*(c+1)<a.scrollSoFar&&o(d)&&(f=!0);return f?(a.currentPageIndex=d*a.pagesPerRow,0!==b&&(n(b)||p(a.currentPageIndex)),!0):!1},v=function(b,c){0<c?j(b)&&(h(b)?(i(b),a.lastPageLoaded=b,v(a.lastPageLoaded+1,c)):a.heightAbovePages[b]+l(b,"h")+a.verticalPadding<a.scrollSoFar&&v(b+1,c)):j(b)&&(h(b)?(i(b),a.firstPageLoaded=b,v(a.firstPageLoaded-1,c)):a.heightAbovePages[b]>a.scrollSoFar+a.panelHeight&&v(b-1,c))},y=function(b,c){0<c?j(b)&&a.heightAbovePages[b]+l(b,
"h")+a.verticalPadding<a.scrollSoFar&&(m(b),a.firstPageLoaded++,y(a.firstPageLoaded,c)):j(b)&&a.heightAbovePages[b]>a.scrollSoFar+a.panelHeight&&(m(b),a.lastPageLoaded--,y(a.lastPageLoaded,c))},w=function(b,c){0<c?o(b)&&(G(b)?(H(b),a.lastRowLoaded=b,w(a.lastRowLoaded+1,c)):a.rowHeight*(b+1)<a.scrollSoFar&&w(b+1,c)):o(b)&&(G(b)?(H(b),a.firstRowLoaded=b,w(a.firstRowLoaded-1,c)):a.rowHeight*b>a.scrollSoFar+a.panelHeight&&w(b-1,c))},t=function(c){0<b(a.selector+"row-"+c).length&&b(a.selector+"row-"+c).empty().remove()},
z=function(b,c){0<c?o(b)&&a.rowHeight*(b+1)<a.scrollSoFar&&(t(b),a.firstRowLoaded++,z(a.firstRowLoaded,c)):o(b)&&a.rowHeight*b>a.scrollSoFar+a.panelHeight&&(t(b),a.lastRowLoaded--,z(a.lastRowLoaded,c))},D=function(b){0>b?(w(a.firstRowLoaded,-1),n(-1),z(a.lastRowLoaded,-1)):0<b&&(z(a.firstRowLoaded,1),n(1),w(a.lastRowLoaded,1));0!==b&&(g(a.onScroll,a.scrollSoFar),0<b?g(a.onScrollDown,a.scrollSoFar):g(a.onScrollUp,a.scrollSoFar))},E=function(b){0>b?(v(a.firstPageLoaded,b),r(-1),y(a.lastPageLoaded,b)):
0<b&&(y(a.firstPageLoaded,b),v(a.lastPageLoaded,b),r(1));0!==b&&(g(a.onScroll,a.scrollSoFar),0<b?g(a.onScrollDown,a.scrollSoFar):g(a.onScrollUp,a.scrollSoFar))},s=function(){a.gridScrollTop?(b(a.outerSelector).scrollTop(a.gridScrollTop),a.gridScrollTop=0):B(a.currentPageIndex+1)},A=function(){var c;0<=a.goDirectlyTo?(B(a.goDirectlyTo+1,a.desiredYOffset,a.desiredXOffset),a.goDirectlyTo=-1,c=!0):c=!1;if(!c)if(0<=a.scrollLeft&&0<=a.scrollTop)b(a.outerSelector).scrollTop(a.scrollTop),b(a.outerSelector).scrollLeft(a.scrollLeft),
a.scrollLeft=-1,a.scrollTop=-1;else{var d;d=0<a.dimBeforeZoom?a.dimAfterZoom/a.dimBeforeZoom:1;a.doubleClick?(c=a.centerX*d,d*=a.centerY,c=Math.max(c-a.panelWidth/2,0),d=Math.max(d-a.panelHeight/2,0)):(c=a.maxWidths[a.zoomLevel]/2-a.panelWidth/2+a.horizontalPadding,d*=a.verticalOffset);a.prevVptTop=0;b(a.outerSelector).scrollTop(d);b(a.outerSelector).scrollLeft(c)}},X=function(){b.ajax({url:a.divaserveURL,data:{d:a.imageDir},cache:!0,dataType:"json",error:function(c){b(a.outerSelector).text("Invalid URL. Error code: "+
c.status)},success:function(c){a.pages=c.pgs;a.maxRatio=c.dims.max_ratio;a.minRatio=c.dims.min_ratio;a.itemTitle=c.item_title;a.numPages=c.pgs.length;a.maxWidths=c.dims.max_w;a.maxHeights=c.dims.max_h;a.averageWidths=c.dims.a_wid;a.averageHeights=c.dims.a_hei;a.totalHeights=c.dims.t_hei;a.totalWidths=c.dims.t_wid;a.maxZoomLevel=0<=a.maxZoomLevel&&a.maxZoomLevel<=c.max_zoom?a.maxZoomLevel:c.max_zoom;a.minZoomLevel=0<=a.minZoomLevel&&a.minZoomLevel<=a.maxZoomLevel?a.minZoomLevel:0;a.minPagesPerRow=
Math.max(2,a.minPagesPerRow);a.maxPagesPerRow=Math.max(a.minPagesPerRow,a.maxPagesPerRow);a.enableFilename?(c=b.getHashParam("i"+a.hashParamSuffix),c=J(c),0<=c&&(a.goDirectlyTo=c)):(c=parseInt(b.getHashParam("p"+a.hashParamSuffix),10),j(c)&&(a.goDirectlyTo=c));b.each(a.plugins,function(b,c){g(c.setupHook,a)});a.toolbar=W();b(a.selector+"current label").text(a.numPages);a.enableAutoTitle&&b(a.elementSelector).prepend('<div id="'+a.ID+'title" class="title">'+a.itemTitle+"</div>");a.inGrid?q(a.pagesPerRow):
C(a.zoomLevel);g(a.onReady,a)}})},G=function(b){b*=a.rowHeight;return k(b,b+a.rowHeight+a.fixedPadding)},H=function(c){if(!(0<b(a.selector+"row-"+c).length)){var d,e=[];e.push('<div class="row" id="'+a.ID+"row-"+c+'" style="height: '+a.rowHeight+"; top: "+(a.rowHeight*c+a.fixedPadding)+'px;">');for(d=0;d<a.pagesPerRow;d++){var f=c*a.pagesPerRow+d;if(!j(f))break;var g=a.pages[f].f,n=a.fixedHeightGrid?(a.rowHeight-a.fixedPadding)*l(f,"w")/l(f,"h"):a.gridPageWidth,p=a.fixedHeightGrid?a.rowHeight-a.fixedPadding:
n/l(f,"w")*l(f,"h"),r=parseInt(d*(a.fixedPadding+a.gridPageWidth)+a.fixedPadding,10),n=parseInt(n,10),p=parseInt(p,10),r=r+(a.fixedHeightGrid?(a.gridPageWidth-n)/2:0),g=a.iipServerURL+g+"&amp;HEI="+(p+2)+"&amp;CVT=JPG";e.push('<div id="'+a.ID+"page-"+f+'" class="page" style="width: '+n+"px; height: "+p+"px; left: "+r+'px;"></div>');Y(f,g,n,p)}b(a.innerSelector).append(e.join(""))}},Y=function(c,d,e,f){a.pageTimeouts.push(setTimeout(function(){b(a.selector+"page-"+c).html('<img src="'+d+'" style="width: '+
e+"px; height: "+f+'px;" />')},a.rowLoadTimeout))},K=function(){b(a.outerSelector).scrollTop(0);a.scrollSoFar=0;b(a.innerSelector).text("");a.firstPageLoaded=0;for(a.firstRowLoaded=-1;0<a.pageTimeouts.length;)clearTimeout(a.pageTimeouts.pop())},q=function(c){a.pagesPerRow=c>=a.minPagesPerRow&&c<=a.maxPagesPerRow?c:a.maxPagesPerRow;K();c=(a.panelWidth-a.fixedPadding*(a.pagesPerRow+1))/a.pagesPerRow;a.gridPageWidth=c;a.rowHeight=a.fixedHeightGrid?a.fixedPadding+a.minRatio*c:a.fixedPadding+a.maxRatio*
c;a.numRows=Math.ceil(a.numPages/a.pagesPerRow);a.totalHeight=a.numRows*a.rowHeight+a.fixedPadding;b(a.innerSelector).css("height",Math.round(a.totalHeight));b(a.innerSelector).css("width",Math.round(a.panelWidth));s();a.scrollSoFar=b(a.outerSelector).scrollTop();for(c=0;c<a.numPages;c+=a.pagesPerRow){var d=Math.floor(c/a.pagesPerRow);G(d)&&(a.firstRowLoaded=0>a.firstRowLoaded?d:a.firstRowLoaded,H(d),a.lastRowLoaded=d)}},C=function(c){K();var d=c>=a.minZoomLevel&&c<=a.maxZoomLevel?c:a.minZoomLevel;
a.zoomLevel=d;0<a.adaptivePadding?(a.horizontalPadding=a.averageWidths[d]*a.adaptivePadding,a.verticalPadding=a.averageHeights[d]*a.adaptivePadding):(a.horizontalPadding=a.fixedPadding,a.verticalPadding=a.fixedPadding);a.plugins&&(a.verticalPadding=Math.max(40,a.horizontalPadding));a.totalHeight=a.totalHeights[d]+a.verticalPadding*(a.numPages+1);a.dimAfterZoom=a.totalHeight;d=a.maxWidths[d]+2*a.horizontalPadding<a.panelWidth?a.panelWidth:a.maxWidths[d]+2*a.horizontalPadding;b(a.innerSelector).css("width",
Math.round(d));var e=0;a.lastPageLoaded=-1;for(var f=0;f<a.numPages;f++)if(a.heightAbovePages[f]=e,e=a.heightAbovePages[f]+l(f,"h")+a.verticalPadding,a.pageLeftOffsets[f]=(d-l(f,"w"))/2,h(f))i(f),a.lastPageLoaded=f;else if(0<=a.loadPageLoaded)break;a.dimBeforeZoom>a.dimAfterZoom&&g(a.onZoomOut,c);a.dimBeforeZoom<a.dimAfterZoom&&g(a.onZoomIn,c);b(a.innerSelector).css("height",Math.round(a.totalHeight));A();a.dimBeforeZoom=a.dimAfterZoom;a.scaleWait&&(a.scaleWait=!1)},F=function(c){return a.zoomLevel!=
c&&c>=a.minZoomLevel&&c<=a.maxZoomLevel?(C(c),b(a.selector+"zoom-slider").slider({value:c}),!0):!1},L=function(c){a.verticalOffset=b(a.outerSelector).scrollTop();a.horizontalOffset=b(a.outerSelector).scrollLeft();a.toolbar.setZoomLevel(c);a.inGrid&&x(!0);a.doubleClick=!1;F(c)},B=function(c,d,e){d||(d=1);e||(e=0);if(a.inGrid){if(e=Math.ceil(c/a.pagesPerRow)-1,o(e))return d=e*a.rowHeight,b(a.outerSelector).scrollTop(d),p(c-1),a.currentPageIndex=c-1,!0}else if(pageIndex=c-1,j(pageIndex))return d=a.heightAbovePages[pageIndex]+
d,p(pageIndex),b(a.outerSelector).scrollTop(d),e=0<e?e:(b(a.innerSelector).width()-a.panelWidth)/2,b(a.outerSelector).scrollLeft(e),g(a.onJump,c),!0;return!1},M=function(c){var d;if(a.zoomLevel===a.maxZoomLevel)if(c.ctrlKey||a.ctrlKey)d=a.zoomLevel-1;else return;else if(a.zoomLevel===a.minZoomLevel){if(c.ctrlKey||a.ctrlKey)return;d=a.zoomLevel+1}else d=c.ctrlKey||a.ctrlKey?a.zoomLevel-1:a.zoomLevel+1;a.numClicks=0;a.centerX=c.pageX-a.viewerXOffset+b(a.outerSelector).scrollLeft();a.centerY=c.pageY-
a.viewerYOffset+b(a.outerSelector).scrollTop();a.doubleClick=!0;F(d);a.toolbar.setZoomLevel(d)},O=function(){b(a.selector+"fullscreen").css("position","fixed").css("z-index","9001");b(a.outerSelector).addClass("fullscreen");a.inFullscreen=!0;b("body").addClass("hide-scrollbar");b(a.elementSelector).addClass("full-width");g(a.onFullscreenEnter);var c;b(window).resize(function(){clearTimeout(c);c=setTimeout(function(){N();a.inGrid?(D(1),q(a.pagesPerRow)):E(1)},10)})},N=function(){a.panelHeight=b(a.outerSelector).height();
a.panelWidth=b(a.outerSelector).width()-a.scrollbarWidth},P=function(){b(a.outerSelector).removeClass("fullscreen");a.inFullscreen=!1;b(a.selector+"fullscreen").css("position","absolute").css("z-index","8999");b("body").removeClass("hide-scrollbar");b(a.elementSelector).removeClass("full-width");g(a.onFullscreenExit)},R=function(){a.toolbar.switchSlider();a.inGrid?x():Q();g(a.onGrid)},Q=function(){a.desiredXOffset=b(a.outerSelector).scrollLeft();a.desiredYOffset=S();a.inGrid=!0;q(a.pagesPerRow)},
x=function(c){a.gridScrollTop=b(a.outerSelector).scrollTop();a.inGrid=!1;0>a.goDirectlyTo&&(a.goDirectlyTo=a.currentPageIndex);c||C(a.zoomLevel)},Z=function(){a.enableGrid&&b(a.selector+"grid-icon").click(function(){R()});a.enableFullscreen&&b(a.selector+"fullscreen").click(function(){a.verticalOffset=b(a.outerSelector).scrollTop();a.horizontalOffset=b(a.outerSelector).scrollLeft();a.doubleClick=!1;b(a.innerSelector).text("");a.inFullscreen?P():O();a.toolbar&&a.toolbar.switchView();N();b(a.innerSelector).width(a.panelWidth);
a.inGrid?q(a.pagesPerRow):C(a.zoomLevel)});b(a.innerSelector).mouseover(function(){b(this).removeClass("grabbing").addClass("grab")});b(a.innerSelector).mouseout(function(){b(this).removeClass("grab")});b(a.innerSelector).mousedown(function(){b(this).removeClass("grab").addClass("grabbing")});b(a.innerSelector).mouseup(function(){b(this).removeClass("grabbing").addClass("grab")});b(a.outerSelector+", "+a.innerSelector).dragscrollable({dragSelector:".dragger",acceptPropagatedEvent:!0});b(a.outerSelector).scroll(function(){a.inGrid?
(a.scrollSoFar=b(a.outerSelector).scrollTop(),D(a.scrollSoFar-a.prevVptTop),a.prevVptTop=a.scrollSoFar):(a.scrollSoFar=b(a.outerSelector).scrollTop(),E(a.scrollSoFar-a.prevVptTop),a.prevVptTop=a.scrollSoFar,a.leftScrollSoFar=b(this).scrollLeft())});b(a.outerSelector).bind("contextmenu",function(b){var c=b.originalEvent;c.ctrlKey&&(a.ctrlKey=!0,a.numClicks++,1<a.numClicks&&(M(b),a.numClicks=0),c.preventDefault(),c.stopPropagation(),a.ctrlKey=!1)});b(a.outerSelector).dblclick(function(c){a.viewerXOffset=
b(this).offset().left;a.viewerYOffset=b(this).offset().top;if(a.inGrid){var d=c.pageX-a.viewerXOffset+b(a.outerSelector).scrollLeft(),c=c.pageY-a.viewerYOffset+b(a.outerSelector).scrollTop(),d=Math.floor(c/a.rowHeight)*a.pagesPerRow+Math.floor(d/(a.panelWidth/a.pagesPerRow));a.desiredXOffset=0;a.desiredYOffset=0;a.goDirectlyTo=d;a.toolbar.switchSlider();x()}else M(c)});if(a.mobileSafari){b(a.outerSelector).oneFingerScroll();var c=[];c.push('<meta name="viewport" content="user-scalable=no, width=device-width" />');
c.push('<meta name="apple-mobile-web-app-capable" content="yes" />');c.push('<meta name="apple-mobile-web-app-status-bar-style" content="black" />');b("head").append(c.join("\n"));b("body").bind("touchmove",function(a){a.originalEvent.preventDefault()});b("body").bind("gestureend",function(b){b=b.originalEvent;if(!a.scaleWait)if(a.inGrid)x();else a:{var c=a.zoomLevel;if(1<b.scale&&c<a.maxZoomLevel)c++;else if(1>b.scale&&c>a.minZoomLevel)c--;else break a;a.scaleWait=!0;L(c)}return!1})}if(a.enableSpaceScroll||
a.enableKeyScroll){var d=b.ui.keyCode.SPACE,e=b.ui.keyCode.PAGE_UP,f=b.ui.keyCode.PAGE_DOWN,g=b.ui.keyCode.HOME,n=b.ui.keyCode.END;b(document).keydown(function(c){if(a.enableSpaceScroll&&c.keyCode==d||a.enableKeyScroll&&c.keyCode==f)return b(a.outerSelector).scrollTop(a.scrollSoFar+a.panelHeight),!1;if(a.enableKeyScroll&&c.keyCode==e)return b(a.outerSelector).scrollTop(a.scrollSoFar-a.panelHeight),!1;if(a.enableKeyScroll&&c.keyCode==g)return b(a.outerSelector).scrollTop(0),!1;if(a.enableKeyScroll&&
c.keyCode==n)return b(a.outerSelector).scrollTop(a.totalHeight),!1})}},W=function(){var c=a.enableGrid?'<div class="button'+(a.inGrid?" in-grid":"")+'" id="'+a.ID+'grid-icon" title="Toggle grid"></div>':"",d=a.enableLink?'<div class="button" id="'+a.ID+'link-icon" style="'+(a.enableGrid?"border-left: 0px":"")+'" title="Link to this page"></div>':"",e=a.enableZoomSlider?'<div id="'+a.ID+'zoom-slider"></div>':"",f=a.enableGridSlider?'<div id="'+a.ID+'grid-slider"></div>':"",g=a.enableGotoPage?'<form id="'+
a.ID+'goto-page" class="goto-form"><input type="text" id="'+a.ID+'goto-page-input" / class="input"> <input type="submit" value="Go to page" style="margin-top: 0px;" /></form>':"",n=a.enableZoomSlider?'<div id="'+a.ID+'zoom-slider-label" class="slider-label">Zoom level: <span id="'+a.ID+'zoom-level">'+a.zoomLevel+"</span></div>":"",p=a.enableGridSlider?'<div id="'+a.ID+'grid-slider-label" class="slider-label">Pages per row: <span id="'+a.ID+'pages-per-row">'+a.pagesPerRow+"</span></div>":"",r='<div class="page-label">Page <span id="'+
a.ID+'current-page">1</span> of <span id="'+a.ID+'num-pages">'+a.numPages+"</span></div>",h="";a.contained&&(b(a.elementSelector).css("position","relative"),h=" fullscreen-space",a.enableAutoTitle&&b(a.selector+"fullscreen").addClass("contained"));c='<div id="'+a.ID+'tools-left" class="tools-left'+h+'">'+e+f+n+p+'</div><div id="'+a.ID+'tools-right" class="tools-right">'+d+c+'<div class="page-tools">'+g+r+"</div></div>";b(a.elementSelector).prepend('<div id="'+a.ID+'tools" class="tools">'+c+"</div>");
b(a.selector+"zoom-slider").slider({value:a.zoomLevel,min:a.minZoomLevel,max:a.maxZoomLevel,step:1,slide:function(a,b){L(b.value)}});b(a.selector+"grid-slider").slider({value:a.pagesPerRow,min:a.minPagesPerRow,max:a.maxPagesPerRow,step:1,slide:function(b,c){var d=c.value;a.toolbar.setPagesPerRow(d);q(d)}});b(a.selector+"grid-icon").click(function(){R()});b(a.selector+"goto-page").submit(function(){var c=parseInt(b(a.selector+"goto-page-input").val(),10);B(c)||alert("Invalid page number");return!1});
b(a.selector+"link-icon").click(function(){var c=b(a.outerSelector).offset().left+a.panelWidth;b("body").prepend('<div id="'+a.ID+'link-popup"><input id="'+a.ID+'link-popup-input" class="diva-input" type="text" value="'+T()+'"/></div>');a.inFullscreen?b(a.selector+"link-popup").css("top","150px").css("right","30px"):b(a.selector+"link-popup").css("top",b(a.outerSelector).offset().top+"px").css("left",c-217+"px");b("body").mouseup(function(c){c=c.target.id;c==a.ID+"link-popup"||c==a.ID+"link-popup-input"||
b(a.selector+"link-popup").remove()});b(a.outerSelector).scroll(function(){b(a.selector+"link-popup").remove()});b(a.selector+"link-popup input").click(function(){b(this).focus().select()});return!1});var i=a.inGrid?"grid":"zoom";b(a.selector+i+"-slider").show();b(a.selector+i+"-slider-label").show();c=function(){b(a.selector+"tools").toggleClass("fullscreen-tools");a.inFullscreen?(b(a.selector+"tools-right").after(b(a.selector+"tools-left")),b(a.selector+"tools-left").css("float","right").css("padding-top",
"10px").css("text-align","right").css("clear","both")):(b(a.selector+"tools-left").after(b(a.selector+"tools-right")),b(a.selector+"tools-left").css("float","left").css("padding-top","0px").css("text-align","left").css("clear","none"))};a.jumpIntoFullscreen&&c();return{setCurrentPage:function(c){b(a.selector+"current-page").text(c)},setNumPages:function(c){b(a.selector+"num-pages").text(c)},setZoomLevel:function(c){b(a.selector+"zoom-level").text(c)},setPagesPerRow:function(c){b(a.selector+"pages-per-row").text(c)},
switchSlider:function(){b(a.selector+i+"-slider").hide();b(a.selector+i+"-slider-label").hide();i=!a.inGrid?"grid":"zoom";b(a.selector+i+"-slider").show();b(a.selector+i+"-slider-label").show();console.log("changing image for grid icon");b(a.selector+"grid-icon").toggleClass("in-grid")},switchView:c}},J=function(b){for(var c=0;c<a.numPages;c++)if(a.pages[c].f==b)return c;return-1},S=function(){var c=b(a.outerSelector).scrollTop();return parseInt(c-a.heightAbovePages[a.currentPageIndex],10)},U=function(){return{f:a.inFullscreen,
g:a.inGrid,z:a.zoomLevel,n:a.pagesPerRow,i:a.currentPageIndex,y:a.inGrid?a.documentLeftScroll:S(),x:a.inGrid?a.documentLeftScroll:b(a.outerSelector).scrollLeft(),gy:a.inGrid?b(a.outerSelector).scrollTop():a.gridScrollTop,h:a.inFullscreen?!1:a.panelHeight,w:a.inFullscreen?!1:a.panelWidth+a.scrollbarWidth}},V=function(){var b=U(),c=b.i;b.i=a.enableFilename?a.pages[c].f:c+1;var c=[],d;for(d in b)!1!==b[d]&&c.push(d+a.hashParamSuffix+"="+b[d]);return c.join("&")},T=function(){return location.protocol+
"//"+location.host+location.pathname+"#"+V()},I=function(c,d){if(c>=a.minWidth&&d>=a.minHeight){var e=a.panelWidth;b(a.outerSelector).width(c);b(a.outerSelector).height(d);a.panelHeight=d;a.panelWidth=c-a.scrollbarWidth;b(a.parentSelector).width(c);a.inGrid?q(a.pagesPerRow):e!==a.panelWidth&&C(a.zoomLevel)}},aa=function(){if(window.divaPlugins){var c=['<div class="page-tools">'];b.each(window.divaPlugins,function(d,e){var f=e.pluginName[0].toUpperCase()+e.pluginName.substring(1);a["disable"+f]||(g(e.init,
a),c.push('<div class="'+e.pluginName+'-icon" title="'+(e.titleText||f+" plugin")+'"></div>'),b(a.outerSelector).delegate("."+e.pluginName+"-icon","click",function(b){e.handleClick.call(this,b,a)}),a.plugins.push(e))});c.push("</div>");a.pageTools=c.join("")}};(function(){a.scrollbarWidth=b.getScrollbarWidth();a.mobileSafari="iPad"==navigator.platform||"iPhone"==navigator.platform||"iPod"==navigator.platform;a.elementSelector="#"+b(c).attr("id");b(a.elementSelector).addClass("diva");a.ID=b.generateId("diva-");
a.selector="#"+a.ID;var d=parseInt(a.ID,10);1<d&&(a.hashParamSuffix=d);a.outerSelector=a.selector+"outer";a.innerSelector=a.selector+"inner";b(a.elementSelector).append('<div id="'+a.ID+'outer" class="outer"></div>');b(a.outerSelector).append('<div id="'+a.ID+'inner" class="inner dragger"></div>');a.mobileSafari?(a.panelWidth=screen.width-a.scrollbarWidth,a.panelHeight="iPad"==navigator.platform?screen.height-170:screen.height-250,b(a.elementSelector).css("width",a.panelWidth),b(a.outerSelector).css("width",
a.panelWidth+"px"),b(a.outerSelector).css("height",a.panelHeight+"px")):(a.panelWidth=parseInt(b(a.elementSelector).width(),10)-18,b(a.outerSelector).css("width",a.panelWidth+18+"px"),a.panelHeight=parseInt(b(a.outerSelector).height(),10));a.enableFullscreen&&b(a.elementSelector).prepend('<div id="'+a.ID+'fullscreen"></div>');d=parseInt(b.getHashParam("n"+a.hashParamSuffix),10);d>=a.minPagesPerRow&&d<=a.maxPagesPerRow&&(a.pagesPerRow=d);d=b.getHashParam("z"+a.hashParamSuffix);""!==d&&(d=parseInt(d,
10),d>=a.minZoomLevel&&(a.zoomLevel=d));d=parseInt(b.getHashParam("y"+a.hashParamSuffix),10);0<d&&(a.desiredYOffset=d);d=parseInt(b.getHashParam("x"+a.hashParamSuffix),10);0<d&&(a.desiredXOffset=d);var d="true"===b.getHashParam("g"+a.hashParamSuffix)&&a.enableGrid,e="true"===b.getHashParam("f"+a.hashParamSuffix)&&a.enableFullscreen;a.inGrid=d;a.inFullscreen=e;d=parseInt(b.getHashParam("gy"+a.hashParamSuffix),10);0<d&&(a.gridScrollTop=d);d=parseInt(b.getHashParam("h"+a.hashParamSuffix),10);e=parseInt(b.getHashParam("w"+
a.hashParamSuffix),10);a.minHeight=parseInt(b(a.outerSelector).css("min-height"));a.minWidth=parseInt(b(a.outerSelector).css("min-width"));(0<d||0<e)&&I(e,d);X();aa();Z()})();this.getItemTitle=function(){return a.itemTitle};this.gotoPage=function(a){return B(a)};this.getCurrentPage=function(){return a.currentPageIndex};this.getZoomLevel=function(){return a.zoomLevel};this.setZoomLevel=function(a){return F(a)};this.zoomIn=function(){return this.setZoomLevel(a.zoomLevel+1)};this.zoomOut=function(){return this.setZoomLevel(a.zoomLevel-
1)};this.inViewport=function(b,c,d){b=a.heightAbovePages[b-1]+c;return k(b,b+d)};this.enterFullscreen=function(){if(a.inFullscreen)return!1;O();return!0};this.leaveFullscreen=function(){return a.inFullscreen?(P(),!0):!1};this.enterGrid=function(){if(a.inGrid)return!1;Q();return!0};this.leaveGrid=function(){return a.inGrid?(x(),!0):!1};this.gotoPageByName=function(b){for(var c=0;c<a.numPages;c++)if(a.pages[c].f==b)return B(c),!0;return!1};this.getCurrentURL=function(){return T()};this.getURLHash=function(){return V()};
this.getState=function(){return U()};this.setState=function(b){a.gridScrollTop=b.gy;a.goDirectlyTo=isNaN(b.i)?J(b.i):b.i;a.desiredXOffset=b.x;a.desiredYOffset=b.y;if(b.g)if(a.zoomLevel=b.z,a.inGrid)if(a.pagesPerRow===b.n)s();else{var c=b.n;a.toolbar.setPagesPerRow(c);q(c)}else a.pagesPerRow=b.n,a.inGrid=!0,q(a.pagesPerRow);else a.pagesPerRow=b.n,a.inGrid?(a.zoomLevel=b.z,x()):a.zoomLevel===b.z?A():F(b.z);(a.panelHeight!==b.h||a.panelWidth+a.scrollbarWidth!==b.w)&&I(b.h,b.w)};this.resize=function(a,
b){I(a,b)};this.destroy=function(){b(a.parentSelector).empty().removeData("diva");b.each(a.plugins,function(a,b){g(b.destroy)})}};b.fn.diva=function(c){return this.each(function(){var e=b(this);if(!e.data("diva")){c.parentSelector=e;var a=new d(this,c);e.data("diva",a);c.diva=a}})}})(jQuery);window.divaPlugins.push(function(){var b={},d={},c={},e={c:1,b:0,r:0},a={c:1,b:0,r:0},f,g={contrastStep:0.05,maxBrightness:150,maxContrast:3,minBrightness:-100,minContrast:-1},k=function(a,b){var c=a.context,d=a.size/2;c.clearRect(0,0,a.size,a.size);c.save();c.translate(d,d);c.rotate(b*Math.PI/180);c.drawImage(f,-(a.width/2),-(a.height/2),a.width,a.height);c.restore();a.data=c.getImageData(0,0,a.size,a.size)},h=function(b,c,e){a[b]!==c&&("r"==b&&k(d,c),a[b]=c,$(e).prev().find("i").text(c),i(d))},
i=function(b){for(var d=b.data,e=b.context.createImageData(d),f=e.data,g=0,h=f.length;g<h;g++)f[g]=d.data[g];var d=e.data,i,j,k,l,m,o=1+Math.min(c.maxBrightness,Math.max(c.minBrightness,a.b))/c.maxBrightness;for(f=0,h=e.width;f<h;f++)for(g=0,i=e.height;g<i;g++)j=4*(g*h+f),k=d[j],l=d[j+1],m=d[j+2],0<k+l+m&&(k=k*o*a.c+128-128*a.c,l=l*o*a.c+128-128*a.c,m=m*o*a.c+128-128*a.c,d[j]=0<k?Math.min(k,255):0,d[j+1]=0<l?Math.min(l,255):0,d[j+2]=0<m?Math.min(m,255):0);b.context.clearRect(0,0,h,i);b.context.putImageData(e,
0,0)},m=function(){var a=$("#diva-canvas-wrapper").scrollLeft()*d.scaleFactor+10,b=$("#diva-canvas-wrapper").scrollTop()*d.scaleFactor+10,e=Math.min(c.viewport.height*d.scaleFactor,c.mapSize)-2,f=Math.min(c.viewport.width*d.scaleFactor,c.mapSize)-2;$("#diva-map-viewbox").height(e).width(f).css("top",b+"px").css("left",a+"px")},o=function(a,e){f=new Image;f.src=a;f.onload=function(){b.size=Math.sqrt(f.width*f.width+f.height*f.height);b.canvas=document.getElementById("diva-canvas");b.canvas.width=b.size;
b.canvas.height=b.size;b.cornerX=(b.size-f.width)/2;b.cornerY=(b.size-f.height)/2;b.width=f.width;b.height=f.height;b.centerX=b.size/2;b.centerY=b.size/2;b.context=b.canvas.getContext("2d");b.context.drawImage(f,b.cornerX,b.cornerY,b.width,b.height);b.data=b.context.getImageData(0,0,b.size,b.size);if(void 0==e){var a=f;d.canvas=document.getElementById("diva-canvas-minimap");d.size=c.mapSize;d.canvas.width=d.size;d.canvas.height=d.size;d.context=d.canvas.getContext("2d");d.context.fillRect(0,0,d.size,
d.size);d.scaleFactor=c.mapSize/b.size;d.cornerX=b.cornerX*d.scaleFactor;d.cornerY=b.cornerY*d.scaleFactor;d.width=a.width*d.scaleFactor;d.height=a.height*d.scaleFactor;d.context.drawImage(a,d.cornerX,d.cornerY,d.width,d.height);d.data=d.context.getImageData(0,0,c.mapSize,c.mapSize);m()}$.executeCallback(e)}},j=function(a){a=c.zoomWidthRatio*Math.pow(2,a);return c.iipServerURL+c.filename+"&WID="+a+"&CVT=JPG"},l=function(f){c.zoomLevel=f;$("#zoom-slider").prev().find("i").text(f);f=j(f);o(f,function(){e=
{c:1,b:0,r:0};e.r!==a.r&&k(b,a.r);i(b);d.scaleFactor=d.size/b.size;m()})};return{init:function(f){c=$.extend(c,g,f);c.viewport={height:window.innerHeight-c.scrollbarWidth,width:window.innerWidth-c.scrollbarWidth};c.inCanvas=!1;$("body").append('<div id="diva-canvas-backdrop"><div id="diva-canvas-tools" style="right: '+(c.scrollbarWidth+20)+'px"><div id="diva-map-viewbox"></div><canvas id="diva-canvas-minimap"></canvas><br /><span>Brightness: <i>0</i> <b id="brightness-reset">(Reset)</b></span><div id="brightness-slider"></div><span>Contrast: <i>1</i> <b id="contrast-reset">(Reset)</b></span><div id="contrast-slider"></div><span>Rotation: <i>0</i>&deg; (<b class="rotation-reset" id="rotation-reset">0</b>&deg; <b class="rotation-reset">90</b>&deg; <b class="rotation-reset">180</b>&deg; <b class="rotation-reset">270</b>&deg;)</span><div id="rotation-slider"></div><span>Zoom level: <i>0</i></span><div id="zoom-slider"></div><div id="diva-canvas-applybox"><span><button type="button" id="diva-canvas-apply">Apply</button></span><span id="diva-canvas-loading">Loading ...</span></div></div><div id="diva-canvas-wrapper"><canvas id="diva-canvas"></canvas></div><div id="diva-canvas-close" style="background: url('+
c.iconPath+'close.png)"></div></div>');c.mapSize=$("#diva-canvas-minimap").width();$("#brightness-slider").slider({min:c.minBrightness,max:c.maxBrightness,step:1,value:0,slide:function(a,b){h("b",b.value,this)}});$("#contrast-slider").slider({min:c.minContrast,max:c.maxContrast,step:c.contrastStep,value:1,slide:function(a,b){h("c",b.value,this)}});$("#rotation-slider").slider({min:0,max:359,step:1,value:0,slide:function(a,b){h("r",b.value,this)}});$("#brightness-reset").click(function(){h("b",0,$("#brightness-slider").slider("value",
0))});$("#contrast-reset").click(function(){h("c",1,$("#contrast-slider").slider("value",1))});$(".rotation-reset").click(function(){$(this).text();h("r",$(this).text(),$("#rotation-slider").slider("value",$(this).text()))});$("#diva-canvas-apply").click(function(){$("#diva-canvas-loading").show();setTimeout(function(){var d,f,g=a.r;if(g!==e.r){f=$("#diva-canvas-backdrop").scrollLeft();d=$("#diva-canvas-backdrop").scrollTop();var h=c.viewport.width/2,j=c.viewport.height/2;f=f+h-b.centerX;var l=-(d+
j-b.centerY),m=(a.r-g)*Math.PI/180;d=Math.cos(m)*f-Math.sin(m)*l+b.centerX;f=-(Math.sin(m)*f+Math.cos(m)*l)+b.centerY;k(b,g);$("#diva-canvas-backdrop").scrollLeft(d-h);$("#diva-canvas-backdrop").scrollTop(f-j)}if(a.b!==e.b||a.c!==e.c||a.r!==e.r)i(b),e.b=a.b,e.c=a.c,e.r=g;$("#diva-canvas-loading").fadeOut(1E3)},10)});$("#diva-canvas-close").click(function(){$("body").removeClass("overflow-hidden");b.context.clearRect(0,0,b.size,b.size);d.context.clearRect(0,0,d.size,d.size);$("#diva-canvas-backdrop").hide();
$("#brightness-reset").click();$("#contrast-reset").click();$("#rotation-reset").click()});$(window).resize(function(){c.viewport={height:window.innerHeight-c.scrollbarWidth,width:window.innerWidth-c.scrollbarWidth};c.inCanvas&&m()});$("#diva-canvas-wrapper").scroll(function(){c.inCanvas&&m()});$("#diva-canvas-minimap, #diva-map-viewbox").click(function(a){var b=(a.pageX-(c.viewport.width-c.mapSize-30))/d.scaleFactor,a=(a.pageY-30)/d.scaleFactor;$("#diva-canvas-wrapper").scrollTop(a-c.viewport.height/
2);$("#diva-canvas-wrapper").scrollLeft(b-c.viewport.width/2)});$("#diva-canvas").mousedown(function(){$(this).addClass("grabbing")}).mouseup(function(){$(this).removeClass("grabbing")});$("#diva-canvas-wrapper").dragscrollable({acceptPropagatedEvent:!0});$("#diva-canvas-wrapper").dblclick(function(){l(c.zoomLevel+1)})},pluginName:"canvas",titleText:"View the image on a canvas and adjust various settings",setupHook:function(a){c.minZoomLevel=a.minZoomLevel;c.maxZoomLevel=a.maxZoomLevel},handleClick:function(a,
b){var d=b.zoomLevel;$("body").addClass("overflow-hidden");$("#diva-canvas-backdrop").show();c.inCanvas=!0;var e=$(this).parent().parent(),f=$(e).attr("data-filename"),e=$(e).width()-1;c.zoomWidthRatio=e/Math.pow(2,d);c.filename=f;f=j(d);o(f);$("#zoom-slider").prev().find("i").text(d);$("#zoom-slider").slider({min:c.minZoomLevel,max:c.maxZoomLevel,step:1,value:d,slide:function(a,b){l(b.value)}})},destroy:function(){$("#diva-canvas-backdrop").remove()}}}());window.divaPlugins.push(function(){var b;return{init:function(d){b=d.iipServerURL},pluginName:"download",titleText:"Download image at the given zoom level",handleClick:function(){var d=$(this).parent().parent(),c=$(d).attr("data-filename"),d=$(d).width()-1;window.open(b+c+"&WID="+d+"&CVT=JPG")}}}());
